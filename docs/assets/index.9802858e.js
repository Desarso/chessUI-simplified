(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();const Wl=(c,i)=>c===i,Ql=Symbol("solid-track"),Fi={equals:Wl};let Co=Vo;const At=1,qi=2,Io={owned:null,cleanups:null,context:null,owner:null};var we=null;let Mn=null,Kl=null,Ae=null,Ve=null,gt=null,zi=0;function Ri(c,i){const t=Ae,n=we,r=c.length===0,s=i===void 0?n:i,d=r?Io:{owned:null,cleanups:null,context:s?s.context:null,owner:s},a=r?c:()=>c(()=>ct(()=>Gi(d)));we=d,Ae=null;try{return wi(a,!0)}finally{Ae=t,we=n}}function j(c,i){i=i?Object.assign({},Fi,i):Fi;const t={value:c,observers:null,observerSlots:null,comparator:i.equals||void 0},n=r=>(typeof r=="function"&&(r=r(t.value)),Eo(t,r));return[To.bind(t),n]}function mt(c,i,t){const n=$n(c,i,!1,At);vi(n)}function Hi(c,i,t){Co=Jl;const n=$n(c,i,!1,At);(!t||!t.render)&&(n.user=!0),gt?gt.push(n):vi(n)}function Ze(c,i,t){t=t?Object.assign({},Fi,t):Fi;const n=$n(c,i,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=t.equals||void 0,vi(n),To.bind(n)}function ct(c){if(Ae===null)return c();const i=Ae;Ae=null;try{return c()}finally{Ae=i}}function De(c){Hi(()=>ct(c))}function ko(c){return we===null||(we.cleanups===null?we.cleanups=[c]:we.cleanups.push(c)),c}function zl(c,i){const t=Symbol("context");return{id:t,Provider:ta(t),defaultValue:c}}function Gl(c){return we&&we.context&&we.context[c.id]!==void 0?we.context[c.id]:c.defaultValue}function Yl(c){const i=Ze(c),t=Ze(()=>On(i()));return t.toArray=()=>{const n=t();return Array.isArray(n)?n:n!=null?[n]:[]},t}function To(){if(this.sources&&this.state)if(this.state===At)vi(this);else{const c=Ve;Ve=null,wi(()=>Wi(this),!1),Ve=c}if(Ae){const c=this.observers?this.observers.length:0;Ae.sources?(Ae.sources.push(this),Ae.sourceSlots.push(c)):(Ae.sources=[this],Ae.sourceSlots=[c]),this.observers?(this.observers.push(Ae),this.observerSlots.push(Ae.sources.length-1)):(this.observers=[Ae],this.observerSlots=[Ae.sources.length-1])}return this.value}function Eo(c,i,t){let n=c.value;return(!c.comparator||!c.comparator(n,i))&&(c.value=i,c.observers&&c.observers.length&&wi(()=>{for(let r=0;r<c.observers.length;r+=1){const s=c.observers[r],d=Mn&&Mn.running;d&&Mn.disposed.has(s),(d?!s.tState:!s.state)&&(s.pure?Ve.push(s):gt.push(s),s.observers&&So(s)),d||(s.state=At)}if(Ve.length>1e6)throw Ve=[],new Error},!1)),i}function vi(c){if(!c.fn)return;Gi(c);const i=zi;Zl(c,c.value,i)}function Zl(c,i,t){let n;const r=we,s=Ae;Ae=we=c;try{n=c.fn(i)}catch(d){return c.pure&&(c.state=At,c.owned&&c.owned.forEach(Gi),c.owned=null),c.updatedAt=t+1,Mo(d)}finally{Ae=s,we=r}(!c.updatedAt||c.updatedAt<=t)&&(c.updatedAt!=null&&"observers"in c?Eo(c,n):c.value=n,c.updatedAt=t)}function $n(c,i,t,n=At,r){const s={fn:c,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:i,owner:we,context:we?we.context:null,pure:t};return we===null||we!==Io&&(we.owned?we.owned.push(s):we.owned=[s]),s}function ji(c){if(c.state===0)return;if(c.state===qi)return Wi(c);if(c.suspense&&ct(c.suspense.inFallback))return c.suspense.effects.push(c);const i=[c];for(;(c=c.owner)&&(!c.updatedAt||c.updatedAt<zi);)c.state&&i.push(c);for(let t=i.length-1;t>=0;t--)if(c=i[t],c.state===At)vi(c);else if(c.state===qi){const n=Ve;Ve=null,wi(()=>Wi(c,i[0]),!1),Ve=n}}function wi(c,i){if(Ve)return c();let t=!1;i||(Ve=[]),gt?t=!0:gt=[],zi++;try{const n=c();return Xl(t),n}catch(n){t||(gt=null),Ve=null,Mo(n)}}function Xl(c){if(Ve&&(Vo(Ve),Ve=null),c)return;const i=gt;gt=null,i.length&&wi(()=>Co(i),!1)}function Vo(c){for(let i=0;i<c.length;i++)ji(c[i])}function Jl(c){let i,t=0;for(i=0;i<c.length;i++){const n=c[i];n.user?c[t++]=n:ji(n)}for(i=0;i<t;i++)ji(c[i])}function Wi(c,i){c.state=0;for(let t=0;t<c.sources.length;t+=1){const n=c.sources[t];if(n.sources){const r=n.state;r===At?n!==i&&(!n.updatedAt||n.updatedAt<zi)&&ji(n):r===qi&&Wi(n,i)}}}function So(c){for(let i=0;i<c.observers.length;i+=1){const t=c.observers[i];t.state||(t.state=qi,t.pure?Ve.push(t):gt.push(t),t.observers&&So(t))}}function Gi(c){let i;if(c.sources)for(;c.sources.length;){const t=c.sources.pop(),n=c.sourceSlots.pop(),r=t.observers;if(r&&r.length){const s=r.pop(),d=t.observerSlots.pop();n<r.length&&(s.sourceSlots[d]=n,r[n]=s,t.observerSlots[n]=d)}}if(c.owned){for(i=c.owned.length-1;i>=0;i--)Gi(c.owned[i]);c.owned=null}if(c.cleanups){for(i=c.cleanups.length-1;i>=0;i--)c.cleanups[i]();c.cleanups=null}c.state=0}function ea(c){return c instanceof Error?c:new Error(typeof c=="string"?c:"Unknown error",{cause:c})}function Mo(c,i=we){throw ea(c)}function On(c){if(typeof c=="function"&&!c.length)return On(c());if(Array.isArray(c)){const i=[];for(let t=0;t<c.length;t++){const n=On(c[t]);Array.isArray(n)?i.push.apply(i,n):i.push(n)}return i}return c}function ta(c,i){return function(n){let r;return mt(()=>r=ct(()=>(we.context={...we.context,[c]:n.value},Yl(()=>n.children))),void 0),r}}const ia=Symbol("fallback");function mo(c){for(let i=0;i<c.length;i++)c[i]()}function na(c,i,t={}){let n=[],r=[],s=[],d=0,a=i.length>1?[]:null;return ko(()=>mo(s)),()=>{let u=c()||[],m,v;return u[Ql],ct(()=>{let U=u.length,x,b,M,$,T,V,R,S,F;if(U===0)d!==0&&(mo(s),s=[],n=[],r=[],d=0,a&&(a=[])),t.fallback&&(n=[ia],r[0]=Ri(q=>(s[0]=q,t.fallback())),d=1);else if(d===0){for(r=new Array(U),v=0;v<U;v++)n[v]=u[v],r[v]=Ri(I);d=U}else{for(M=new Array(U),$=new Array(U),a&&(T=new Array(U)),V=0,R=Math.min(d,U);V<R&&n[V]===u[V];V++);for(R=d-1,S=U-1;R>=V&&S>=V&&n[R]===u[S];R--,S--)M[S]=r[R],$[S]=s[R],a&&(T[S]=a[R]);for(x=new Map,b=new Array(S+1),v=S;v>=V;v--)F=u[v],m=x.get(F),b[v]=m===void 0?-1:m,x.set(F,v);for(m=V;m<=R;m++)F=n[m],v=x.get(F),v!==void 0&&v!==-1?(M[v]=r[m],$[v]=s[m],a&&(T[v]=a[m]),v=b[v],x.set(F,v)):s[m]();for(v=V;v<U;v++)v in M?(r[v]=M[v],s[v]=$[v],a&&(a[v]=T[v],a[v](v))):r[v]=Ri(I);r=r.slice(0,d=U),n=u.slice(0)}return r});function I(U){if(s[v]=U,a){const[x,b]=j(v);return a[v]=b,i(u[v],x)}return i(u[v])}}}function K(c,i){return ct(()=>c(i||{}))}const sa=c=>`Stale read from <${c}>.`;function Yi(c){const i="fallback"in c&&{fallback:()=>c.fallback};return Ze(na(()=>c.each,c.children,i||void 0))}function Ee(c){const i=c.keyed,t=Ze(()=>c.when,void 0,{equals:(n,r)=>i?n===r:!n==!r});return Ze(()=>{const n=t();if(n){const r=c.children;return typeof r=="function"&&r.length>0?ct(()=>r(i?n:()=>{if(!ct(t))throw sa("Show");return c.when})):r}return c.fallback},void 0,void 0)}function oa(c,i,t){let n=t.length,r=i.length,s=n,d=0,a=0,u=i[r-1].nextSibling,m=null;for(;d<r||a<s;){if(i[d]===t[a]){d++,a++;continue}for(;i[r-1]===t[s-1];)r--,s--;if(r===d){const v=s<n?a?t[a-1].nextSibling:t[s-a]:u;for(;a<s;)c.insertBefore(t[a++],v)}else if(s===a)for(;d<r;)(!m||!m.has(i[d]))&&i[d].remove(),d++;else if(i[d]===t[s-1]&&t[a]===i[r-1]){const v=i[--r].nextSibling;c.insertBefore(t[a++],i[d++].nextSibling),c.insertBefore(t[--s],v),i[r]=t[s]}else{if(!m){m=new Map;let I=a;for(;I<s;)m.set(t[I],I++)}const v=m.get(i[d]);if(v!=null)if(a<v&&v<s){let I=d,U=1,x;for(;++I<r&&I<s&&!((x=m.get(i[I]))==null||x!==v+U);)U++;if(U>v-a){const b=i[d];for(;a<v;)c.insertBefore(t[a++],b)}else c.replaceChild(t[a++],i[d++])}else d++;else i[d++].remove()}}}const vo="_$DX_DELEGATE";function ra(c,i,t,n={}){let r;return Ri(s=>{r=s,i===document?c():ye(i,c(),i.firstChild?null:void 0,t)},n.owner),()=>{r(),i.textContent=""}}function _e(c,i,t){let n;const r=()=>{const d=document.createElement("template");return d.innerHTML=c,t?d.content.firstChild.firstChild:d.content.firstChild},s=i?()=>ct(()=>document.importNode(n||(n=r()),!0)):()=>(n||(n=r())).cloneNode(!0);return s.cloneNode=s,s}function Ut(c,i=window.document){const t=i[vo]||(i[vo]=new Set);for(let n=0,r=c.length;n<r;n++){const s=c[n];t.has(s)||(t.add(s),i.addEventListener(s,ca))}}function Dn(c,i,t){t==null?c.removeAttribute(i):c.setAttribute(i,t)}function Zi(c,i){i==null?c.removeAttribute("class"):c.className=i}function la(c,i,t,n){if(n)Array.isArray(t)?(c[`$$${i}`]=t[0],c[`$$${i}Data`]=t[1]):c[`$$${i}`]=t;else if(Array.isArray(t)){const r=t[0];c.addEventListener(i,t[0]=s=>r.call(c,t[1],s))}else c.addEventListener(i,t)}function aa(c,i,t){if(!i)return t?Dn(c,"style"):i;const n=c.style;if(typeof i=="string")return n.cssText=i;typeof t=="string"&&(n.cssText=t=void 0),t||(t={}),i||(i={});let r,s;for(s in t)i[s]==null&&n.removeProperty(s),delete t[s];for(s in i)r=i[s],r!==t[s]&&(n.setProperty(s,r),t[s]=r);return t}function wo(c,i,t){return ct(()=>c(i,t))}function ye(c,i,t,n){if(t!==void 0&&!n&&(n=[]),typeof i!="function")return Qi(c,i,n,t);mt(r=>Qi(c,i(),r,t),n)}function ca(c){const i=`$$${c.type}`;let t=c.composedPath&&c.composedPath()[0]||c.target;for(c.target!==t&&Object.defineProperty(c,"target",{configurable:!0,value:t}),Object.defineProperty(c,"currentTarget",{configurable:!0,get(){return t||document}});t;){const n=t[i];if(n&&!t.disabled){const r=t[`${i}Data`];if(r!==void 0?n.call(t,r,c):n.call(t,c),c.cancelBubble)return}t=t._$host||t.parentNode||t.host}}function Qi(c,i,t,n,r){for(;typeof t=="function";)t=t();if(i===t)return t;const s=typeof i,d=n!==void 0;if(c=d&&t[0]&&t[0].parentNode||c,s==="string"||s==="number")if(s==="number"&&(i=i.toString()),d){let a=t[0];a&&a.nodeType===3?a.data!==i&&(a.data=i):a=document.createTextNode(i),t=ii(c,t,n,a)}else t!==""&&typeof t=="string"?t=c.firstChild.data=i:t=c.textContent=i;else if(i==null||s==="boolean")t=ii(c,t,n);else{if(s==="function")return mt(()=>{let a=i();for(;typeof a=="function";)a=a();t=Qi(c,a,t,n)}),()=>t;if(Array.isArray(i)){const a=[],u=t&&Array.isArray(t);if(Nn(a,i,t,r))return mt(()=>t=Qi(c,a,t,n,!0)),()=>t;if(a.length===0){if(t=ii(c,t,n),d)return t}else u?t.length===0?yo(c,a,n):oa(c,t,a):(t&&ii(c),yo(c,a));t=a}else if(i.nodeType){if(Array.isArray(t)){if(d)return t=ii(c,t,n,i);ii(c,t,null,i)}else t==null||t===""||!c.firstChild?c.appendChild(i):c.replaceChild(i,c.firstChild);t=i}}return t}function Nn(c,i,t,n){let r=!1;for(let s=0,d=i.length;s<d;s++){let a=i[s],u=t&&t[c.length],m;if(!(a==null||a===!0||a===!1))if((m=typeof a)=="object"&&a.nodeType)c.push(a);else if(Array.isArray(a))r=Nn(c,a,u)||r;else if(m==="function")if(n){for(;typeof a=="function";)a=a();r=Nn(c,Array.isArray(a)?a:[a],Array.isArray(u)?u:[u])||r}else c.push(a),r=!0;else{const v=String(a);u&&u.nodeType===3&&u.data===v?c.push(u):c.push(document.createTextNode(v))}}return r}function yo(c,i,t=null){for(let n=0,r=i.length;n<r;n++)c.insertBefore(i[n],t)}function ii(c,i,t,n){if(t===void 0)return c.textContent="";const r=n||document.createTextNode("");if(i.length){let s=!1;for(let d=i.length-1;d>=0;d--){const a=i[d];if(r!==a){const u=a.parentNode===c;!s&&!d?u?c.replaceChild(r,a):c.insertBefore(r,t):u&&a.remove()}else s=!0}}else c.insertBefore(r,t);return[r]}var ha=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ua={exports:{}};/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(c,i){(function(t,n){c.exports=n()})(ha,function(){const t=new Map,n={set(l,e,o){t.has(l)||t.set(l,new Map);const h=t.get(l);h.has(e)||h.size===0?h.set(e,o):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(h.keys())[0]}.`)},get:(l,e)=>t.has(l)&&t.get(l).get(e)||null,remove(l,e){if(!t.has(l))return;const o=t.get(l);o.delete(e),o.size===0&&t.delete(l)}},r="transitionend",s=l=>(l&&window.CSS&&window.CSS.escape&&(l=l.replace(/#([^\s"#']+)/g,(e,o)=>`#${CSS.escape(o)}`)),l),d=l=>{l.dispatchEvent(new Event(r))},a=l=>!(!l||typeof l!="object")&&(l.jquery!==void 0&&(l=l[0]),l.nodeType!==void 0),u=l=>a(l)?l.jquery?l[0]:l:typeof l=="string"&&l.length>0?document.querySelector(s(l)):null,m=l=>{if(!a(l)||l.getClientRects().length===0)return!1;const e=getComputedStyle(l).getPropertyValue("visibility")==="visible",o=l.closest("details:not([open])");if(!o)return e;if(o!==l){const h=l.closest("summary");if(h&&h.parentNode!==o||h===null)return!1}return e},v=l=>!l||l.nodeType!==Node.ELEMENT_NODE||!!l.classList.contains("disabled")||(l.disabled!==void 0?l.disabled:l.hasAttribute("disabled")&&l.getAttribute("disabled")!=="false"),I=l=>{if(!document.documentElement.attachShadow)return null;if(typeof l.getRootNode=="function"){const e=l.getRootNode();return e instanceof ShadowRoot?e:null}return l instanceof ShadowRoot?l:l.parentNode?I(l.parentNode):null},U=()=>{},x=l=>{l.offsetHeight},b=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,M=[],$=()=>document.documentElement.dir==="rtl",T=l=>{var e;e=()=>{const o=b();if(o){const h=l.NAME,f=o.fn[h];o.fn[h]=l.jQueryInterface,o.fn[h].Constructor=l,o.fn[h].noConflict=()=>(o.fn[h]=f,l.jQueryInterface)}},document.readyState==="loading"?(M.length||document.addEventListener("DOMContentLoaded",()=>{for(const o of M)o()}),M.push(e)):e()},V=(l,e=[],o=l)=>typeof l=="function"?l(...e):o,R=(l,e,o=!0)=>{if(!o)return void V(l);const h=(w=>{if(!w)return 0;let{transitionDuration:_,transitionDelay:A}=window.getComputedStyle(w);const B=Number.parseFloat(_),L=Number.parseFloat(A);return B||L?(_=_.split(",")[0],A=A.split(",")[0],1e3*(Number.parseFloat(_)+Number.parseFloat(A))):0})(e)+5;let f=!1;const p=({target:w})=>{w===e&&(f=!0,e.removeEventListener(r,p),V(l))};e.addEventListener(r,p),setTimeout(()=>{f||d(e)},h)},S=(l,e,o,h)=>{const f=l.length;let p=l.indexOf(e);return p===-1?!o&&h?l[f-1]:l[0]:(p+=o?1:-1,h&&(p=(p+f)%f),l[Math.max(0,Math.min(p,f-1))])},F=/[^.]*(?=\..*)\.|.*/,q=/\..*/,k=/::\d+$/,J={};let re=1;const Y={mouseenter:"mouseover",mouseleave:"mouseout"},ae=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function ve(l,e){return e&&`${e}::${re++}`||l.uidEvent||re++}function fe(l){const e=ve(l);return l.uidEvent=e,J[e]=J[e]||{},J[e]}function vt(l,e,o=null){return Object.values(l).find(h=>h.callable===e&&h.delegationSelector===o)}function wt(l,e,o){const h=typeof e=="string",f=h?o:e||o;let p=Xe(l);return ae.has(p)||(p=l),[h,f,p]}function Ct(l,e,o,h,f){if(typeof e!="string"||!l)return;let[p,w,_]=wt(e,o,h);e in Y&&(w=(z=>function(Q){if(!Q.relatedTarget||Q.relatedTarget!==Q.delegateTarget&&!Q.delegateTarget.contains(Q.relatedTarget))return z.call(this,Q)})(w));const A=fe(l),B=A[_]||(A[_]={}),L=vt(B,w,p?o:null);if(L)return void(L.oneOff=L.oneOff&&f);const E=ve(w,e.replace(F,"")),X=p?function(W,z,Q){return function G(ue){const me=W.querySelectorAll(z);for(let{target:ie}=ue;ie&&ie!==this;ie=ie.parentNode)for(const le of me)if(le===ie)return yt(ue,{delegateTarget:ie}),G.oneOff&&P.off(W,ue.type,z,Q),Q.apply(ie,[ue])}}(l,o,w):function(W,z){return function Q(G){return yt(G,{delegateTarget:W}),Q.oneOff&&P.off(W,G.type,z),z.apply(W,[G])}}(l,w);X.delegationSelector=p?o:null,X.callable=w,X.oneOff=f,X.uidEvent=E,B[E]=X,l.addEventListener(_,X,p)}function ht(l,e,o,h,f){const p=vt(e[o],h,f);p&&(l.removeEventListener(o,p,Boolean(f)),delete e[o][p.uidEvent])}function It(l,e,o,h){const f=e[o]||{};for(const[p,w]of Object.entries(f))p.includes(h)&&ht(l,e,o,w.callable,w.delegationSelector)}function Xe(l){return l=l.replace(q,""),Y[l]||l}const P={on(l,e,o,h){Ct(l,e,o,h,!1)},one(l,e,o,h){Ct(l,e,o,h,!0)},off(l,e,o,h){if(typeof e!="string"||!l)return;const[f,p,w]=wt(e,o,h),_=w!==e,A=fe(l),B=A[w]||{},L=e.startsWith(".");if(p===void 0){if(L)for(const E of Object.keys(A))It(l,A,E,e.slice(1));for(const[E,X]of Object.entries(B)){const W=E.replace(k,"");_&&!e.includes(W)||ht(l,A,w,X.callable,X.delegationSelector)}}else{if(!Object.keys(B).length)return;ht(l,A,w,p,f?o:null)}},trigger(l,e,o){if(typeof e!="string"||!l)return null;const h=b();let f=null,p=!0,w=!0,_=!1;e!==Xe(e)&&h&&(f=h.Event(e,o),h(l).trigger(f),p=!f.isPropagationStopped(),w=!f.isImmediatePropagationStopped(),_=f.isDefaultPrevented());const A=yt(new Event(e,{bubbles:p,cancelable:!0}),o);return _&&A.preventDefault(),w&&l.dispatchEvent(A),A.defaultPrevented&&f&&f.preventDefault(),A}};function yt(l,e={}){for(const[o,h]of Object.entries(e))try{l[o]=h}catch{Object.defineProperty(l,o,{configurable:!0,get:()=>h})}return l}function O(l){if(l==="true")return!0;if(l==="false")return!1;if(l===Number(l).toString())return Number(l);if(l===""||l==="null")return null;if(typeof l!="string")return l;try{return JSON.parse(decodeURIComponent(l))}catch{return l}}function te(l){return l.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const H={setDataAttribute(l,e,o){l.setAttribute(`data-bs-${te(e)}`,o)},removeDataAttribute(l,e){l.removeAttribute(`data-bs-${te(e)}`)},getDataAttributes(l){if(!l)return{};const e={},o=Object.keys(l.dataset).filter(h=>h.startsWith("bs")&&!h.startsWith("bsConfig"));for(const h of o){let f=h.replace(/^bs/,"");f=f.charAt(0).toLowerCase()+f.slice(1,f.length),e[f]=O(l.dataset[h])}return e},getDataAttribute:(l,e)=>O(l.getAttribute(`data-bs-${te(e)}`))};class ke{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,o){const h=a(o)?H.getDataAttribute(o,"config"):{};return{...this.constructor.Default,...typeof h=="object"?h:{},...a(o)?H.getDataAttributes(o):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,o=this.constructor.DefaultType){for(const[f,p]of Object.entries(o)){const w=e[f],_=a(w)?"element":(h=w)==null?`${h}`:Object.prototype.toString.call(h).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(p).test(_))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${f}" provided type "${_}" but expected type "${p}".`)}var h}}class pe extends ke{constructor(e,o){super(),(e=u(e))&&(this._element=e,this._config=this._getConfig(o),n.set(this._element,this.constructor.DATA_KEY,this))}dispose(){n.remove(this._element,this.constructor.DATA_KEY),P.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,o,h=!0){R(e,o,h)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return n.get(u(e),this.DATA_KEY)}static getOrCreateInstance(e,o={}){return this.getInstance(e)||new this(e,typeof o=="object"?o:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const Ie=l=>{let e=l.getAttribute("data-bs-target");if(!e||e==="#"){let o=l.getAttribute("href");if(!o||!o.includes("#")&&!o.startsWith("."))return null;o.includes("#")&&!o.startsWith("#")&&(o=`#${o.split("#")[1]}`),e=o&&o!=="#"?o.trim():null}return e?e.split(",").map(o=>s(o)).join(","):null},N={find:(l,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,l)),findOne:(l,e=document.documentElement)=>Element.prototype.querySelector.call(e,l),children:(l,e)=>[].concat(...l.children).filter(o=>o.matches(e)),parents(l,e){const o=[];let h=l.parentNode.closest(e);for(;h;)o.push(h),h=h.parentNode.closest(e);return o},prev(l,e){let o=l.previousElementSibling;for(;o;){if(o.matches(e))return[o];o=o.previousElementSibling}return[]},next(l,e){let o=l.nextElementSibling;for(;o;){if(o.matches(e))return[o];o=o.nextElementSibling}return[]},focusableChildren(l){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(o=>`${o}:not([tabindex^="-"])`).join(",");return this.find(e,l).filter(o=>!v(o)&&m(o))},getSelectorFromElement(l){const e=Ie(l);return e&&N.findOne(e)?e:null},getElementFromSelector(l){const e=Ie(l);return e?N.findOne(e):null},getMultipleElementsFromSelector(l){const e=Ie(l);return e?N.find(e):[]}},Se=(l,e="hide")=>{const o=`click.dismiss${l.EVENT_KEY}`,h=l.NAME;P.on(document,o,`[data-bs-dismiss="${h}"]`,function(f){if(["A","AREA"].includes(this.tagName)&&f.preventDefault(),v(this))return;const p=N.getElementFromSelector(this)||this.closest(`.${h}`);l.getOrCreateInstance(p)[e]()})},it=".bs.alert",kt=`close${it}`,Ft=`closed${it}`;class nt extends pe{static get NAME(){return"alert"}close(){if(P.trigger(this._element,kt).defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),P.trigger(this._element,Ft),this.dispose()}static jQueryInterface(e){return this.each(function(){const o=nt.getOrCreateInstance(this);if(typeof e=="string"){if(o[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);o[e](this)}})}}Se(nt,"close"),T(nt);const Tt='[data-bs-toggle="button"]';class bt extends pe{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each(function(){const o=bt.getOrCreateInstance(this);e==="toggle"&&o[e]()})}}P.on(document,"click.bs.button.data-api",Tt,l=>{l.preventDefault();const e=l.target.closest(Tt);bt.getOrCreateInstance(e).toggle()}),T(bt);const D=".bs.swipe",g=`touchstart${D}`,ne=`touchmove${D}`,Z=`touchend${D}`,li=`pointerdown${D}`,Me=`pointerup${D}`,Be={endCallback:null,leftCallback:null,rightCallback:null},ut={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class He extends ke{constructor(e,o){super(),this._element=e,e&&He.isSupported()&&(this._config=this._getConfig(o),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Be}static get DefaultType(){return ut}static get NAME(){return"swipe"}dispose(){P.off(this._element,D)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),V(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const o=e/this._deltaX;this._deltaX=0,o&&V(o>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(P.on(this._element,li,e=>this._start(e)),P.on(this._element,Me,e=>this._end(e)),this._element.classList.add("pointer-event")):(P.on(this._element,g,e=>this._start(e)),P.on(this._element,ne,e=>this._move(e)),P.on(this._element,Z,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType==="pen"||e.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Te=".bs.carousel",st=".data-api",Je="next",je="prev",qt="left",yi="right",Ro=`slide${Te}`,Xi=`slid${Te}`,Uo=`keydown${Te}`,Fo=`mouseenter${Te}`,qo=`mouseleave${Te}`,Ho=`dragstart${Te}`,jo=`load${Te}${st}`,Wo=`click${Te}${st}`,Un="carousel",bi="active",Fn=".active",qn=".carousel-item",Qo=Fn+qn,Ko={ArrowLeft:yi,ArrowRight:qt},zo={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Go={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ht extends pe{constructor(e,o){super(e,o),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=N.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Un&&this.cycle()}static get Default(){return zo}static get DefaultType(){return Go}static get NAME(){return"carousel"}next(){this._slide(Je)}nextWhenVisible(){!document.hidden&&m(this._element)&&this.next()}prev(){this._slide(je)}pause(){this._isSliding&&d(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?P.one(this._element,Xi,()=>this.cycle()):this.cycle())}to(e){const o=this._getItems();if(e>o.length-1||e<0)return;if(this._isSliding)return void P.one(this._element,Xi,()=>this.to(e));const h=this._getItemIndex(this._getActive());if(h===e)return;const f=e>h?Je:je;this._slide(f,o[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&P.on(this._element,Uo,e=>this._keydown(e)),this._config.pause==="hover"&&(P.on(this._element,Fo,()=>this.pause()),P.on(this._element,qo,()=>this._maybeEnableCycle())),this._config.touch&&He.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const o of N.find(".carousel-item img",this._element))P.on(o,Ho,h=>h.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(qt)),rightCallback:()=>this._slide(this._directionToOrder(yi)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new He(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const o=Ko[e.key];o&&(e.preventDefault(),this._slide(this._directionToOrder(o)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const o=N.findOne(Fn,this._indicatorsElement);o.classList.remove(bi),o.removeAttribute("aria-current");const h=N.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);h&&(h.classList.add(bi),h.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const o=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=o||this._config.defaultInterval}_slide(e,o=null){if(this._isSliding)return;const h=this._getActive(),f=e===Je,p=o||S(this._getItems(),h,f,this._config.wrap);if(p===h)return;const w=this._getItemIndex(p),_=E=>P.trigger(this._element,E,{relatedTarget:p,direction:this._orderToDirection(e),from:this._getItemIndex(h),to:w});if(_(Ro).defaultPrevented||!h||!p)return;const A=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(w),this._activeElement=p;const B=f?"carousel-item-start":"carousel-item-end",L=f?"carousel-item-next":"carousel-item-prev";p.classList.add(L),x(p),h.classList.add(B),p.classList.add(B),this._queueCallback(()=>{p.classList.remove(B,L),p.classList.add(bi),h.classList.remove(bi,L,B),this._isSliding=!1,_(Xi)},h,this._isAnimated()),A&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return N.findOne(Qo,this._element)}_getItems(){return N.find(qn,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return $()?e===qt?je:Je:e===qt?Je:je}_orderToDirection(e){return $()?e===je?qt:yi:e===je?yi:qt}static jQueryInterface(e){return this.each(function(){const o=Ht.getOrCreateInstance(this,e);if(typeof e!="number"){if(typeof e=="string"){if(o[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);o[e]()}}else o.to(e)})}}P.on(document,Wo,"[data-bs-slide], [data-bs-slide-to]",function(l){const e=N.getElementFromSelector(this);if(!e||!e.classList.contains(Un))return;l.preventDefault();const o=Ht.getOrCreateInstance(e),h=this.getAttribute("data-bs-slide-to");return h?(o.to(h),void o._maybeEnableCycle()):H.getDataAttribute(this,"slide")==="next"?(o.next(),void o._maybeEnableCycle()):(o.prev(),void o._maybeEnableCycle())}),P.on(window,jo,()=>{const l=N.find('[data-bs-ride="carousel"]');for(const e of l)Ht.getOrCreateInstance(e)}),T(Ht);const ai=".bs.collapse",Yo=`show${ai}`,Zo=`shown${ai}`,Xo=`hide${ai}`,Jo=`hidden${ai}`,er=`click${ai}.data-api`,Ji="show",jt="collapse",_i="collapsing",tr=`:scope .${jt} .${jt}`,en='[data-bs-toggle="collapse"]',ir={parent:null,toggle:!0},nr={parent:"(null|element)",toggle:"boolean"};class Wt extends pe{constructor(e,o){super(e,o),this._isTransitioning=!1,this._triggerArray=[];const h=N.find(en);for(const f of h){const p=N.getSelectorFromElement(f),w=N.find(p).filter(_=>_===this._element);p!==null&&w.length&&this._triggerArray.push(f)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ir}static get DefaultType(){return nr}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(f=>f!==this._element).map(f=>Wt.getOrCreateInstance(f,{toggle:!1}))),e.length&&e[0]._isTransitioning||P.trigger(this._element,Yo).defaultPrevented)return;for(const f of e)f.hide();const o=this._getDimension();this._element.classList.remove(jt),this._element.classList.add(_i),this._element.style[o]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const h=`scroll${o[0].toUpperCase()+o.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(_i),this._element.classList.add(jt,Ji),this._element.style[o]="",P.trigger(this._element,Zo)},this._element,!0),this._element.style[o]=`${this._element[h]}px`}hide(){if(this._isTransitioning||!this._isShown()||P.trigger(this._element,Xo).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,x(this._element),this._element.classList.add(_i),this._element.classList.remove(jt,Ji);for(const o of this._triggerArray){const h=N.getElementFromSelector(o);h&&!this._isShown(h)&&this._addAriaAndCollapsedClass([o],!1)}this._isTransitioning=!0,this._element.style[e]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(_i),this._element.classList.add(jt),P.trigger(this._element,Jo)},this._element,!0)}_isShown(e=this._element){return e.classList.contains(Ji)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=u(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(en);for(const o of e){const h=N.getElementFromSelector(o);h&&this._addAriaAndCollapsedClass([o],this._isShown(h))}}_getFirstLevelChildren(e){const o=N.find(tr,this._config.parent);return N.find(e,this._config.parent).filter(h=>!o.includes(h))}_addAriaAndCollapsedClass(e,o){if(e.length)for(const h of e)h.classList.toggle("collapsed",!o),h.setAttribute("aria-expanded",o)}static jQueryInterface(e){const o={};return typeof e=="string"&&/show|hide/.test(e)&&(o.toggle=!1),this.each(function(){const h=Wt.getOrCreateInstance(this,o);if(typeof e=="string"){if(h[e]===void 0)throw new TypeError(`No method named "${e}"`);h[e]()}})}}P.on(document,er,en,function(l){(l.target.tagName==="A"||l.delegateTarget&&l.delegateTarget.tagName==="A")&&l.preventDefault();for(const e of N.getMultipleElementsFromSelector(this))Wt.getOrCreateInstance(e,{toggle:!1}).toggle()}),T(Wt);var Le="top",Re="bottom",Ue="right",Oe="left",Pi="auto",Qt=[Le,Re,Ue,Oe],Et="start",Kt="end",Hn="clippingParents",tn="viewport",zt="popper",jn="reference",nn=Qt.reduce(function(l,e){return l.concat([e+"-"+Et,e+"-"+Kt])},[]),sn=[].concat(Qt,[Pi]).reduce(function(l,e){return l.concat([e,e+"-"+Et,e+"-"+Kt])},[]),Wn="beforeRead",Qn="read",Kn="afterRead",zn="beforeMain",Gn="main",Yn="afterMain",Zn="beforeWrite",Xn="write",Jn="afterWrite",es=[Wn,Qn,Kn,zn,Gn,Yn,Zn,Xn,Jn];function ot(l){return l?(l.nodeName||"").toLowerCase():null}function Fe(l){if(l==null)return window;if(l.toString()!=="[object Window]"){var e=l.ownerDocument;return e&&e.defaultView||window}return l}function Vt(l){return l instanceof Fe(l).Element||l instanceof Element}function We(l){return l instanceof Fe(l).HTMLElement||l instanceof HTMLElement}function on(l){return typeof ShadowRoot<"u"&&(l instanceof Fe(l).ShadowRoot||l instanceof ShadowRoot)}const rn={name:"applyStyles",enabled:!0,phase:"write",fn:function(l){var e=l.state;Object.keys(e.elements).forEach(function(o){var h=e.styles[o]||{},f=e.attributes[o]||{},p=e.elements[o];We(p)&&ot(p)&&(Object.assign(p.style,h),Object.keys(f).forEach(function(w){var _=f[w];_===!1?p.removeAttribute(w):p.setAttribute(w,_===!0?"":_)}))})},effect:function(l){var e=l.state,o={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,o.popper),e.styles=o,e.elements.arrow&&Object.assign(e.elements.arrow.style,o.arrow),function(){Object.keys(e.elements).forEach(function(h){var f=e.elements[h],p=e.attributes[h]||{},w=Object.keys(e.styles.hasOwnProperty(h)?e.styles[h]:o[h]).reduce(function(_,A){return _[A]="",_},{});We(f)&&ot(f)&&(Object.assign(f.style,w),Object.keys(p).forEach(function(_){f.removeAttribute(_)}))})}},requires:["computeStyles"]};function rt(l){return l.split("-")[0]}var St=Math.max,xi=Math.min,Gt=Math.round;function ln(){var l=navigator.userAgentData;return l!=null&&l.brands&&Array.isArray(l.brands)?l.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function ts(){return!/^((?!chrome|android).)*safari/i.test(ln())}function Yt(l,e,o){e===void 0&&(e=!1),o===void 0&&(o=!1);var h=l.getBoundingClientRect(),f=1,p=1;e&&We(l)&&(f=l.offsetWidth>0&&Gt(h.width)/l.offsetWidth||1,p=l.offsetHeight>0&&Gt(h.height)/l.offsetHeight||1);var w=(Vt(l)?Fe(l):window).visualViewport,_=!ts()&&o,A=(h.left+(_&&w?w.offsetLeft:0))/f,B=(h.top+(_&&w?w.offsetTop:0))/p,L=h.width/f,E=h.height/p;return{width:L,height:E,top:B,right:A+L,bottom:B+E,left:A,x:A,y:B}}function an(l){var e=Yt(l),o=l.offsetWidth,h=l.offsetHeight;return Math.abs(e.width-o)<=1&&(o=e.width),Math.abs(e.height-h)<=1&&(h=e.height),{x:l.offsetLeft,y:l.offsetTop,width:o,height:h}}function is(l,e){var o=e.getRootNode&&e.getRootNode();if(l.contains(e))return!0;if(o&&on(o)){var h=e;do{if(h&&l.isSameNode(h))return!0;h=h.parentNode||h.host}while(h)}return!1}function dt(l){return Fe(l).getComputedStyle(l)}function sr(l){return["table","td","th"].indexOf(ot(l))>=0}function _t(l){return((Vt(l)?l.ownerDocument:l.document)||window.document).documentElement}function Ai(l){return ot(l)==="html"?l:l.assignedSlot||l.parentNode||(on(l)?l.host:null)||_t(l)}function ns(l){return We(l)&&dt(l).position!=="fixed"?l.offsetParent:null}function ci(l){for(var e=Fe(l),o=ns(l);o&&sr(o)&&dt(o).position==="static";)o=ns(o);return o&&(ot(o)==="html"||ot(o)==="body"&&dt(o).position==="static")?e:o||function(h){var f=/firefox/i.test(ln());if(/Trident/i.test(ln())&&We(h)&&dt(h).position==="fixed")return null;var p=Ai(h);for(on(p)&&(p=p.host);We(p)&&["html","body"].indexOf(ot(p))<0;){var w=dt(p);if(w.transform!=="none"||w.perspective!=="none"||w.contain==="paint"||["transform","perspective"].indexOf(w.willChange)!==-1||f&&w.willChange==="filter"||f&&w.filter&&w.filter!=="none")return p;p=p.parentNode}return null}(l)||e}function cn(l){return["top","bottom"].indexOf(l)>=0?"x":"y"}function hi(l,e,o){return St(l,xi(e,o))}function ss(l){return Object.assign({},{top:0,right:0,bottom:0,left:0},l)}function os(l,e){return e.reduce(function(o,h){return o[h]=l,o},{})}const rs={name:"arrow",enabled:!0,phase:"main",fn:function(l){var e,o=l.state,h=l.name,f=l.options,p=o.elements.arrow,w=o.modifiersData.popperOffsets,_=rt(o.placement),A=cn(_),B=[Oe,Ue].indexOf(_)>=0?"height":"width";if(p&&w){var L=function(de,he){return ss(typeof(de=typeof de=="function"?de(Object.assign({},he.rects,{placement:he.placement})):de)!="number"?de:os(de,Qt))}(f.padding,o),E=an(p),X=A==="y"?Le:Oe,W=A==="y"?Re:Ue,z=o.rects.reference[B]+o.rects.reference[A]-w[A]-o.rects.popper[B],Q=w[A]-o.rects.reference[A],G=ci(p),ue=G?A==="y"?G.clientHeight||0:G.clientWidth||0:0,me=z/2-Q/2,ie=L[X],le=ue-E[B]-L[W],ee=ue/2-E[B]/2+me,se=hi(ie,ee,le),ce=A;o.modifiersData[h]=((e={})[ce]=se,e.centerOffset=se-ee,e)}},effect:function(l){var e=l.state,o=l.options.element,h=o===void 0?"[data-popper-arrow]":o;h!=null&&(typeof h!="string"||(h=e.elements.popper.querySelector(h)))&&is(e.elements.popper,h)&&(e.elements.arrow=h)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Zt(l){return l.split("-")[1]}var or={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ls(l){var e,o=l.popper,h=l.popperRect,f=l.placement,p=l.variation,w=l.offsets,_=l.position,A=l.gpuAcceleration,B=l.adaptive,L=l.roundOffsets,E=l.isFixed,X=w.x,W=X===void 0?0:X,z=w.y,Q=z===void 0?0:z,G=typeof L=="function"?L({x:W,y:Q}):{x:W,y:Q};W=G.x,Q=G.y;var ue=w.hasOwnProperty("x"),me=w.hasOwnProperty("y"),ie=Oe,le=Le,ee=window;if(B){var se=ci(o),ce="clientHeight",de="clientWidth";se===Fe(o)&&dt(se=_t(o)).position!=="static"&&_==="absolute"&&(ce="scrollHeight",de="scrollWidth"),(f===Le||(f===Oe||f===Ue)&&p===Kt)&&(le=Re,Q-=(E&&se===ee&&ee.visualViewport?ee.visualViewport.height:se[ce])-h.height,Q*=A?1:-1),f!==Oe&&(f!==Le&&f!==Re||p!==Kt)||(ie=Ue,W-=(E&&se===ee&&ee.visualViewport?ee.visualViewport.width:se[de])-h.width,W*=A?1:-1)}var he,xe=Object.assign({position:_},B&&or),qe=L===!0?function(tt,Ne){var Ke=tt.x,ze=tt.y,Pe=Ne.devicePixelRatio||1;return{x:Gt(Ke*Pe)/Pe||0,y:Gt(ze*Pe)/Pe||0}}({x:W,y:Q},Fe(o)):{x:W,y:Q};return W=qe.x,Q=qe.y,A?Object.assign({},xe,((he={})[le]=me?"0":"",he[ie]=ue?"0":"",he.transform=(ee.devicePixelRatio||1)<=1?"translate("+W+"px, "+Q+"px)":"translate3d("+W+"px, "+Q+"px, 0)",he)):Object.assign({},xe,((e={})[le]=me?Q+"px":"",e[ie]=ue?W+"px":"",e.transform="",e))}const hn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(l){var e=l.state,o=l.options,h=o.gpuAcceleration,f=h===void 0||h,p=o.adaptive,w=p===void 0||p,_=o.roundOffsets,A=_===void 0||_,B={placement:rt(e.placement),variation:Zt(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:f,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,ls(Object.assign({},B,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:w,roundOffsets:A})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,ls(Object.assign({},B,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:A})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var Ci={passive:!0};const un={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(l){var e=l.state,o=l.instance,h=l.options,f=h.scroll,p=f===void 0||f,w=h.resize,_=w===void 0||w,A=Fe(e.elements.popper),B=[].concat(e.scrollParents.reference,e.scrollParents.popper);return p&&B.forEach(function(L){L.addEventListener("scroll",o.update,Ci)}),_&&A.addEventListener("resize",o.update,Ci),function(){p&&B.forEach(function(L){L.removeEventListener("scroll",o.update,Ci)}),_&&A.removeEventListener("resize",o.update,Ci)}},data:{}};var rr={left:"right",right:"left",bottom:"top",top:"bottom"};function Ii(l){return l.replace(/left|right|bottom|top/g,function(e){return rr[e]})}var lr={start:"end",end:"start"};function as(l){return l.replace(/start|end/g,function(e){return lr[e]})}function dn(l){var e=Fe(l);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function fn(l){return Yt(_t(l)).left+dn(l).scrollLeft}function pn(l){var e=dt(l),o=e.overflow,h=e.overflowX,f=e.overflowY;return/auto|scroll|overlay|hidden/.test(o+f+h)}function cs(l){return["html","body","#document"].indexOf(ot(l))>=0?l.ownerDocument.body:We(l)&&pn(l)?l:cs(Ai(l))}function ui(l,e){var o;e===void 0&&(e=[]);var h=cs(l),f=h===((o=l.ownerDocument)==null?void 0:o.body),p=Fe(h),w=f?[p].concat(p.visualViewport||[],pn(h)?h:[]):h,_=e.concat(w);return f?_:_.concat(ui(Ai(w)))}function gn(l){return Object.assign({},l,{left:l.x,top:l.y,right:l.x+l.width,bottom:l.y+l.height})}function hs(l,e,o){return e===tn?gn(function(h,f){var p=Fe(h),w=_t(h),_=p.visualViewport,A=w.clientWidth,B=w.clientHeight,L=0,E=0;if(_){A=_.width,B=_.height;var X=ts();(X||!X&&f==="fixed")&&(L=_.offsetLeft,E=_.offsetTop)}return{width:A,height:B,x:L+fn(h),y:E}}(l,o)):Vt(e)?function(h,f){var p=Yt(h,!1,f==="fixed");return p.top=p.top+h.clientTop,p.left=p.left+h.clientLeft,p.bottom=p.top+h.clientHeight,p.right=p.left+h.clientWidth,p.width=h.clientWidth,p.height=h.clientHeight,p.x=p.left,p.y=p.top,p}(e,o):gn(function(h){var f,p=_t(h),w=dn(h),_=(f=h.ownerDocument)==null?void 0:f.body,A=St(p.scrollWidth,p.clientWidth,_?_.scrollWidth:0,_?_.clientWidth:0),B=St(p.scrollHeight,p.clientHeight,_?_.scrollHeight:0,_?_.clientHeight:0),L=-w.scrollLeft+fn(h),E=-w.scrollTop;return dt(_||p).direction==="rtl"&&(L+=St(p.clientWidth,_?_.clientWidth:0)-A),{width:A,height:B,x:L,y:E}}(_t(l)))}function us(l){var e,o=l.reference,h=l.element,f=l.placement,p=f?rt(f):null,w=f?Zt(f):null,_=o.x+o.width/2-h.width/2,A=o.y+o.height/2-h.height/2;switch(p){case Le:e={x:_,y:o.y-h.height};break;case Re:e={x:_,y:o.y+o.height};break;case Ue:e={x:o.x+o.width,y:A};break;case Oe:e={x:o.x-h.width,y:A};break;default:e={x:o.x,y:o.y}}var B=p?cn(p):null;if(B!=null){var L=B==="y"?"height":"width";switch(w){case Et:e[B]=e[B]-(o[L]/2-h[L]/2);break;case Kt:e[B]=e[B]+(o[L]/2-h[L]/2)}}return e}function Xt(l,e){e===void 0&&(e={});var o=e,h=o.placement,f=h===void 0?l.placement:h,p=o.strategy,w=p===void 0?l.strategy:p,_=o.boundary,A=_===void 0?Hn:_,B=o.rootBoundary,L=B===void 0?tn:B,E=o.elementContext,X=E===void 0?zt:E,W=o.altBoundary,z=W!==void 0&&W,Q=o.padding,G=Q===void 0?0:Q,ue=ss(typeof G!="number"?G:os(G,Qt)),me=X===zt?jn:zt,ie=l.rects.popper,le=l.elements[z?me:X],ee=function(Ne,Ke,ze,Pe){var lt=Ke==="clippingParents"?function(ge){var $e=ui(Ai(ge)),Ge=["absolute","fixed"].indexOf(dt(ge).position)>=0&&We(ge)?ci(ge):ge;return Vt(Ge)?$e.filter(function(xt){return Vt(xt)&&is(xt,Ge)&&ot(xt)!=="body"}):[]}(Ne):[].concat(Ke),at=[].concat(lt,[ze]),ti=at[0],Ce=at.reduce(function(ge,$e){var Ge=hs(Ne,$e,Pe);return ge.top=St(Ge.top,ge.top),ge.right=xi(Ge.right,ge.right),ge.bottom=xi(Ge.bottom,ge.bottom),ge.left=St(Ge.left,ge.left),ge},hs(Ne,ti,Pe));return Ce.width=Ce.right-Ce.left,Ce.height=Ce.bottom-Ce.top,Ce.x=Ce.left,Ce.y=Ce.top,Ce}(Vt(le)?le:le.contextElement||_t(l.elements.popper),A,L,w),se=Yt(l.elements.reference),ce=us({reference:se,element:ie,strategy:"absolute",placement:f}),de=gn(Object.assign({},ie,ce)),he=X===zt?de:se,xe={top:ee.top-he.top+ue.top,bottom:he.bottom-ee.bottom+ue.bottom,left:ee.left-he.left+ue.left,right:he.right-ee.right+ue.right},qe=l.modifiersData.offset;if(X===zt&&qe){var tt=qe[f];Object.keys(xe).forEach(function(Ne){var Ke=[Ue,Re].indexOf(Ne)>=0?1:-1,ze=[Le,Re].indexOf(Ne)>=0?"y":"x";xe[Ne]+=tt[ze]*Ke})}return xe}function ar(l,e){e===void 0&&(e={});var o=e,h=o.placement,f=o.boundary,p=o.rootBoundary,w=o.padding,_=o.flipVariations,A=o.allowedAutoPlacements,B=A===void 0?sn:A,L=Zt(h),E=L?_?nn:nn.filter(function(z){return Zt(z)===L}):Qt,X=E.filter(function(z){return B.indexOf(z)>=0});X.length===0&&(X=E);var W=X.reduce(function(z,Q){return z[Q]=Xt(l,{placement:Q,boundary:f,rootBoundary:p,padding:w})[rt(Q)],z},{});return Object.keys(W).sort(function(z,Q){return W[z]-W[Q]})}const ds={name:"flip",enabled:!0,phase:"main",fn:function(l){var e=l.state,o=l.options,h=l.name;if(!e.modifiersData[h]._skip){for(var f=o.mainAxis,p=f===void 0||f,w=o.altAxis,_=w===void 0||w,A=o.fallbackPlacements,B=o.padding,L=o.boundary,E=o.rootBoundary,X=o.altBoundary,W=o.flipVariations,z=W===void 0||W,Q=o.allowedAutoPlacements,G=e.options.placement,ue=rt(G),me=A||(ue!==G&&z?function(ge){if(rt(ge)===Pi)return[];var $e=Ii(ge);return[as(ge),$e,as($e)]}(G):[Ii(G)]),ie=[G].concat(me).reduce(function(ge,$e){return ge.concat(rt($e)===Pi?ar(e,{placement:$e,boundary:L,rootBoundary:E,padding:B,flipVariations:z,allowedAutoPlacements:Q}):$e)},[]),le=e.rects.reference,ee=e.rects.popper,se=new Map,ce=!0,de=ie[0],he=0;he<ie.length;he++){var xe=ie[he],qe=rt(xe),tt=Zt(xe)===Et,Ne=[Le,Re].indexOf(qe)>=0,Ke=Ne?"width":"height",ze=Xt(e,{placement:xe,boundary:L,rootBoundary:E,altBoundary:X,padding:B}),Pe=Ne?tt?Ue:Oe:tt?Re:Le;le[Ke]>ee[Ke]&&(Pe=Ii(Pe));var lt=Ii(Pe),at=[];if(p&&at.push(ze[qe]<=0),_&&at.push(ze[Pe]<=0,ze[lt]<=0),at.every(function(ge){return ge})){de=xe,ce=!1;break}se.set(xe,at)}if(ce)for(var ti=function(ge){var $e=ie.find(function(Ge){var xt=se.get(Ge);if(xt)return xt.slice(0,ge).every(function(Oi){return Oi})});if($e)return de=$e,"break"},Ce=z?3:1;Ce>0&&ti(Ce)!=="break";Ce--);e.placement!==de&&(e.modifiersData[h]._skip=!0,e.placement=de,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function fs(l,e,o){return o===void 0&&(o={x:0,y:0}),{top:l.top-e.height-o.y,right:l.right-e.width+o.x,bottom:l.bottom-e.height+o.y,left:l.left-e.width-o.x}}function ps(l){return[Le,Ue,Re,Oe].some(function(e){return l[e]>=0})}const gs={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(l){var e=l.state,o=l.name,h=e.rects.reference,f=e.rects.popper,p=e.modifiersData.preventOverflow,w=Xt(e,{elementContext:"reference"}),_=Xt(e,{altBoundary:!0}),A=fs(w,h),B=fs(_,f,p),L=ps(A),E=ps(B);e.modifiersData[o]={referenceClippingOffsets:A,popperEscapeOffsets:B,isReferenceHidden:L,hasPopperEscaped:E},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":L,"data-popper-escaped":E})}},ms={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(l){var e=l.state,o=l.options,h=l.name,f=o.offset,p=f===void 0?[0,0]:f,w=sn.reduce(function(L,E){return L[E]=function(X,W,z){var Q=rt(X),G=[Oe,Le].indexOf(Q)>=0?-1:1,ue=typeof z=="function"?z(Object.assign({},W,{placement:X})):z,me=ue[0],ie=ue[1];return me=me||0,ie=(ie||0)*G,[Oe,Ue].indexOf(Q)>=0?{x:ie,y:me}:{x:me,y:ie}}(E,e.rects,p),L},{}),_=w[e.placement],A=_.x,B=_.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=A,e.modifiersData.popperOffsets.y+=B),e.modifiersData[h]=w}},mn={name:"popperOffsets",enabled:!0,phase:"read",fn:function(l){var e=l.state,o=l.name;e.modifiersData[o]=us({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},vs={name:"preventOverflow",enabled:!0,phase:"main",fn:function(l){var e=l.state,o=l.options,h=l.name,f=o.mainAxis,p=f===void 0||f,w=o.altAxis,_=w!==void 0&&w,A=o.boundary,B=o.rootBoundary,L=o.altBoundary,E=o.padding,X=o.tether,W=X===void 0||X,z=o.tetherOffset,Q=z===void 0?0:z,G=Xt(e,{boundary:A,rootBoundary:B,padding:E,altBoundary:L}),ue=rt(e.placement),me=Zt(e.placement),ie=!me,le=cn(ue),ee=le==="x"?"y":"x",se=e.modifiersData.popperOffsets,ce=e.rects.reference,de=e.rects.popper,he=typeof Q=="function"?Q(Object.assign({},e.rects,{placement:e.placement})):Q,xe=typeof he=="number"?{mainAxis:he,altAxis:he}:Object.assign({mainAxis:0,altAxis:0},he),qe=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,tt={x:0,y:0};if(se){if(p){var Ne,Ke=le==="y"?Le:Oe,ze=le==="y"?Re:Ue,Pe=le==="y"?"height":"width",lt=se[le],at=lt+G[Ke],ti=lt-G[ze],Ce=W?-de[Pe]/2:0,ge=me===Et?ce[Pe]:de[Pe],$e=me===Et?-de[Pe]:-ce[Pe],Ge=e.elements.arrow,xt=W&&Ge?an(Ge):{width:0,height:0},Oi=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},no=Oi[Ke],so=Oi[ze],Ni=hi(0,ce[Pe],xt[Pe]),$l=ie?ce[Pe]/2-Ce-Ni-no-xe.mainAxis:ge-Ni-no-xe.mainAxis,Dl=ie?-ce[Pe]/2+Ce+Ni+so+xe.mainAxis:$e+Ni+so+xe.mainAxis,En=e.elements.arrow&&ci(e.elements.arrow),Rl=En?le==="y"?En.clientTop||0:En.clientLeft||0:0,oo=(Ne=qe?.[le])!=null?Ne:0,Ul=lt+Dl-oo,ro=hi(W?xi(at,lt+$l-oo-Rl):at,lt,W?St(ti,Ul):ti);se[le]=ro,tt[le]=ro-lt}if(_){var lo,Fl=le==="x"?Le:Oe,ql=le==="x"?Re:Ue,Rt=se[ee],$i=ee==="y"?"height":"width",ao=Rt+G[Fl],co=Rt-G[ql],Vn=[Le,Oe].indexOf(ue)!==-1,ho=(lo=qe?.[ee])!=null?lo:0,uo=Vn?ao:Rt-ce[$i]-de[$i]-ho+xe.altAxis,fo=Vn?Rt+ce[$i]+de[$i]-ho-xe.altAxis:co,po=W&&Vn?function(Hl,jl,Sn){var go=hi(Hl,jl,Sn);return go>Sn?Sn:go}(uo,Rt,fo):hi(W?uo:ao,Rt,W?fo:co);se[ee]=po,tt[ee]=po-Rt}e.modifiersData[h]=tt}},requiresIfExists:["offset"]};function cr(l,e,o){o===void 0&&(o=!1);var h,f,p=We(e),w=We(e)&&function(E){var X=E.getBoundingClientRect(),W=Gt(X.width)/E.offsetWidth||1,z=Gt(X.height)/E.offsetHeight||1;return W!==1||z!==1}(e),_=_t(e),A=Yt(l,w,o),B={scrollLeft:0,scrollTop:0},L={x:0,y:0};return(p||!p&&!o)&&((ot(e)!=="body"||pn(_))&&(B=(h=e)!==Fe(h)&&We(h)?{scrollLeft:(f=h).scrollLeft,scrollTop:f.scrollTop}:dn(h)),We(e)?((L=Yt(e,!0)).x+=e.clientLeft,L.y+=e.clientTop):_&&(L.x=fn(_))),{x:A.left+B.scrollLeft-L.x,y:A.top+B.scrollTop-L.y,width:A.width,height:A.height}}function hr(l){var e=new Map,o=new Set,h=[];function f(p){o.add(p.name),[].concat(p.requires||[],p.requiresIfExists||[]).forEach(function(w){if(!o.has(w)){var _=e.get(w);_&&f(_)}}),h.push(p)}return l.forEach(function(p){e.set(p.name,p)}),l.forEach(function(p){o.has(p.name)||f(p)}),h}var ws={placement:"bottom",modifiers:[],strategy:"absolute"};function ys(){for(var l=arguments.length,e=new Array(l),o=0;o<l;o++)e[o]=arguments[o];return!e.some(function(h){return!(h&&typeof h.getBoundingClientRect=="function")})}function ki(l){l===void 0&&(l={});var e=l,o=e.defaultModifiers,h=o===void 0?[]:o,f=e.defaultOptions,p=f===void 0?ws:f;return function(w,_,A){A===void 0&&(A=p);var B,L,E={placement:"bottom",orderedModifiers:[],options:Object.assign({},ws,p),modifiersData:{},elements:{reference:w,popper:_},attributes:{},styles:{}},X=[],W=!1,z={state:E,setOptions:function(G){var ue=typeof G=="function"?G(E.options):G;Q(),E.options=Object.assign({},p,E.options,ue),E.scrollParents={reference:Vt(w)?ui(w):w.contextElement?ui(w.contextElement):[],popper:ui(_)};var me,ie,le=function(ee){var se=hr(ee);return es.reduce(function(ce,de){return ce.concat(se.filter(function(he){return he.phase===de}))},[])}((me=[].concat(h,E.options.modifiers),ie=me.reduce(function(ee,se){var ce=ee[se.name];return ee[se.name]=ce?Object.assign({},ce,se,{options:Object.assign({},ce.options,se.options),data:Object.assign({},ce.data,se.data)}):se,ee},{}),Object.keys(ie).map(function(ee){return ie[ee]})));return E.orderedModifiers=le.filter(function(ee){return ee.enabled}),E.orderedModifiers.forEach(function(ee){var se=ee.name,ce=ee.options,de=ce===void 0?{}:ce,he=ee.effect;if(typeof he=="function"){var xe=he({state:E,name:se,instance:z,options:de});X.push(xe||function(){})}}),z.update()},forceUpdate:function(){if(!W){var G=E.elements,ue=G.reference,me=G.popper;if(ys(ue,me)){E.rects={reference:cr(ue,ci(me),E.options.strategy==="fixed"),popper:an(me)},E.reset=!1,E.placement=E.options.placement,E.orderedModifiers.forEach(function(he){return E.modifiersData[he.name]=Object.assign({},he.data)});for(var ie=0;ie<E.orderedModifiers.length;ie++)if(E.reset!==!0){var le=E.orderedModifiers[ie],ee=le.fn,se=le.options,ce=se===void 0?{}:se,de=le.name;typeof ee=="function"&&(E=ee({state:E,options:ce,name:de,instance:z})||E)}else E.reset=!1,ie=-1}}},update:(B=function(){return new Promise(function(G){z.forceUpdate(),G(E)})},function(){return L||(L=new Promise(function(G){Promise.resolve().then(function(){L=void 0,G(B())})})),L}),destroy:function(){Q(),W=!0}};if(!ys(w,_))return z;function Q(){X.forEach(function(G){return G()}),X=[]}return z.setOptions(A).then(function(G){!W&&A.onFirstUpdate&&A.onFirstUpdate(G)}),z}}var ur=ki(),dr=ki({defaultModifiers:[un,mn,hn,rn]}),vn=ki({defaultModifiers:[un,mn,hn,rn,ms,ds,vs,rs,gs]});const bs=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Yn,afterRead:Kn,afterWrite:Jn,applyStyles:rn,arrow:rs,auto:Pi,basePlacements:Qt,beforeMain:zn,beforeRead:Wn,beforeWrite:Zn,bottom:Re,clippingParents:Hn,computeStyles:hn,createPopper:vn,createPopperBase:ur,createPopperLite:dr,detectOverflow:Xt,end:Kt,eventListeners:un,flip:ds,hide:gs,left:Oe,main:Gn,modifierPhases:es,offset:ms,placements:sn,popper:zt,popperGenerator:ki,popperOffsets:mn,preventOverflow:vs,read:Qn,reference:jn,right:Ue,start:Et,top:Le,variationPlacements:nn,viewport:tn,write:Xn},Symbol.toStringTag,{value:"Module"})),_s="dropdown",Mt=".bs.dropdown",wn=".data-api",fr="ArrowUp",Ps="ArrowDown",pr=`hide${Mt}`,gr=`hidden${Mt}`,mr=`show${Mt}`,vr=`shown${Mt}`,xs=`click${Mt}${wn}`,As=`keydown${Mt}${wn}`,wr=`keyup${Mt}${wn}`,Jt="show",Bt='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',yr=`${Bt}.${Jt}`,Ti=".dropdown-menu",br=$()?"top-end":"top-start",_r=$()?"top-start":"top-end",Pr=$()?"bottom-end":"bottom-start",xr=$()?"bottom-start":"bottom-end",Ar=$()?"left-start":"right-start",Cr=$()?"right-start":"left-start",Ir={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},kr={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class et extends pe{constructor(e,o){super(e,o),this._popper=null,this._parent=this._element.parentNode,this._menu=N.next(this._element,Ti)[0]||N.prev(this._element,Ti)[0]||N.findOne(Ti,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Ir}static get DefaultType(){return kr}static get NAME(){return _s}toggle(){return this._isShown()?this.hide():this.show()}show(){if(v(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!P.trigger(this._element,mr,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const o of[].concat(...document.body.children))P.on(o,"mouseover",U);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Jt),this._element.classList.add(Jt),P.trigger(this._element,vr,e)}}hide(){if(v(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!P.trigger(this._element,pr,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))P.off(o,"mouseover",U);this._popper&&this._popper.destroy(),this._menu.classList.remove(Jt),this._element.classList.remove(Jt),this._element.setAttribute("aria-expanded","false"),H.removeDataAttribute(this._menu,"popper"),P.trigger(this._element,gr,e)}}_getConfig(e){if(typeof(e=super._getConfig(e)).reference=="object"&&!a(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${_s.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(bs===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:a(this._config.reference)?e=u(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const o=this._getPopperConfig();this._popper=vn(e,this._menu,o)}_isShown(){return this._menu.classList.contains(Jt)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return Ar;if(e.classList.contains("dropstart"))return Cr;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const o=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains("dropup")?o?_r:br:o?xr:Pr}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(o=>Number.parseInt(o,10)):typeof e=="function"?o=>e(o,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(H.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...V(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:o}){const h=N.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(f=>m(f));h.length&&S(h,o,e===Ps,!h.includes(o)).focus()}static jQueryInterface(e){return this.each(function(){const o=et.getOrCreateInstance(this,e);if(typeof e=="string"){if(o[e]===void 0)throw new TypeError(`No method named "${e}"`);o[e]()}})}static clearMenus(e){if(e.button===2||e.type==="keyup"&&e.key!=="Tab")return;const o=N.find(yr);for(const h of o){const f=et.getInstance(h);if(!f||f._config.autoClose===!1)continue;const p=e.composedPath(),w=p.includes(f._menu);if(p.includes(f._element)||f._config.autoClose==="inside"&&!w||f._config.autoClose==="outside"&&w||f._menu.contains(e.target)&&(e.type==="keyup"&&e.key==="Tab"||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const _={relatedTarget:f._element};e.type==="click"&&(_.clickEvent=e),f._completeHide(_)}}static dataApiKeydownHandler(e){const o=/input|textarea/i.test(e.target.tagName),h=e.key==="Escape",f=[fr,Ps].includes(e.key);if(!f&&!h||o&&!h)return;e.preventDefault();const p=this.matches(Bt)?this:N.prev(this,Bt)[0]||N.next(this,Bt)[0]||N.findOne(Bt,e.delegateTarget.parentNode),w=et.getOrCreateInstance(p);if(f)return e.stopPropagation(),w.show(),void w._selectMenuItem(e);w._isShown()&&(e.stopPropagation(),w.hide(),p.focus())}}P.on(document,As,Bt,et.dataApiKeydownHandler),P.on(document,As,Ti,et.dataApiKeydownHandler),P.on(document,xs,et.clearMenus),P.on(document,wr,et.clearMenus),P.on(document,xs,Bt,function(l){l.preventDefault(),et.getOrCreateInstance(this).toggle()}),T(et);const Cs="backdrop",Is="show",ks=`mousedown.bs.${Cs}`,Tr={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Er={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Ts extends ke{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Tr}static get DefaultType(){return Er}static get NAME(){return Cs}show(e){if(!this._config.isVisible)return void V(e);this._append();const o=this._getElement();this._config.isAnimated&&x(o),o.classList.add(Is),this._emulateAnimation(()=>{V(e)})}hide(e){this._config.isVisible?(this._getElement().classList.remove(Is),this._emulateAnimation(()=>{this.dispose(),V(e)})):V(e)}dispose(){this._isAppended&&(P.off(this._element,ks),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=u(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),P.on(e,ks,()=>{V(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){R(e,this._getElement(),this._config.isAnimated)}}const Ei=".bs.focustrap",Vr=`focusin${Ei}`,Sr=`keydown.tab${Ei}`,Es="backward",Mr={autofocus:!0,trapElement:null},Br={autofocus:"boolean",trapElement:"element"};class Vs extends ke{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Mr}static get DefaultType(){return Br}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),P.off(document,Ei),P.on(document,Vr,e=>this._handleFocusin(e)),P.on(document,Sr,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,P.off(document,Ei))}_handleFocusin(e){const{trapElement:o}=this._config;if(e.target===document||e.target===o||o.contains(e.target))return;const h=N.focusableChildren(o);h.length===0?o.focus():this._lastTabNavDirection===Es?h[h.length-1].focus():h[0].focus()}_handleKeydown(e){e.key==="Tab"&&(this._lastTabNavDirection=e.shiftKey?Es:"forward")}}const Ss=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ms=".sticky-top",Vi="padding-right",Bs="margin-right";class yn{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Vi,o=>o+e),this._setElementAttributes(Ss,Vi,o=>o+e),this._setElementAttributes(Ms,Bs,o=>o-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Vi),this._resetElementAttributes(Ss,Vi),this._resetElementAttributes(Ms,Bs)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,o,h){const f=this.getWidth();this._applyManipulationCallback(e,p=>{if(p!==this._element&&window.innerWidth>p.clientWidth+f)return;this._saveInitialAttribute(p,o);const w=window.getComputedStyle(p).getPropertyValue(o);p.style.setProperty(o,`${h(Number.parseFloat(w))}px`)})}_saveInitialAttribute(e,o){const h=e.style.getPropertyValue(o);h&&H.setDataAttribute(e,o,h)}_resetElementAttributes(e,o){this._applyManipulationCallback(e,h=>{const f=H.getDataAttribute(h,o);f!==null?(H.removeDataAttribute(h,o),h.style.setProperty(o,f)):h.style.removeProperty(o)})}_applyManipulationCallback(e,o){if(a(e))o(e);else for(const h of N.find(e,this._element))o(h)}}const Qe=".bs.modal",Lr=`hide${Qe}`,Or=`hidePrevented${Qe}`,Ls=`hidden${Qe}`,Os=`show${Qe}`,Nr=`shown${Qe}`,$r=`resize${Qe}`,Dr=`click.dismiss${Qe}`,Rr=`mousedown.dismiss${Qe}`,Ur=`keydown.dismiss${Qe}`,Fr=`click${Qe}.data-api`,Ns="modal-open",$s="show",bn="modal-static",qr={backdrop:!0,focus:!0,keyboard:!0},Hr={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Lt extends pe{constructor(e,o){super(e,o),this._dialog=N.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new yn,this._addEventListeners()}static get Default(){return qr}static get DefaultType(){return Hr}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||P.trigger(this._element,Os,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ns),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){this._isShown&&!this._isTransitioning&&(P.trigger(this._element,Lr).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove($s),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){P.off(window,Qe),P.off(this._dialog,Qe),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ts({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Vs({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const o=N.findOne(".modal-body",this._dialog);o&&(o.scrollTop=0),x(this._element),this._element.classList.add($s),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,P.trigger(this._element,Nr,{relatedTarget:e})},this._dialog,this._isAnimated())}_addEventListeners(){P.on(this._element,Ur,e=>{e.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),P.on(window,$r,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),P.on(this._element,Rr,e=>{P.one(this._element,Dr,o=>{this._element===e.target&&this._element===o.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Ns),this._resetAdjustments(),this._scrollBar.reset(),P.trigger(this._element,Ls)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(P.trigger(this._element,Or).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,o=this._element.style.overflowY;o==="hidden"||this._element.classList.contains(bn)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(bn),this._queueCallback(()=>{this._element.classList.remove(bn),this._queueCallback(()=>{this._element.style.overflowY=o},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,o=this._scrollBar.getWidth(),h=o>0;if(h&&!e){const f=$()?"paddingLeft":"paddingRight";this._element.style[f]=`${o}px`}if(!h&&e){const f=$()?"paddingRight":"paddingLeft";this._element.style[f]=`${o}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,o){return this.each(function(){const h=Lt.getOrCreateInstance(this,e);if(typeof e=="string"){if(h[e]===void 0)throw new TypeError(`No method named "${e}"`);h[e](o)}})}}P.on(document,Fr,'[data-bs-toggle="modal"]',function(l){const e=N.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&l.preventDefault(),P.one(e,Os,h=>{h.defaultPrevented||P.one(e,Ls,()=>{m(this)&&this.focus()})});const o=N.findOne(".modal.show");o&&Lt.getInstance(o).hide(),Lt.getOrCreateInstance(e).toggle(this)}),Se(Lt),T(Lt);const ft=".bs.offcanvas",Ds=".data-api",jr=`load${ft}${Ds}`,Rs="show",Us="showing",Fs="hiding",qs=".offcanvas.show",Wr=`show${ft}`,Qr=`shown${ft}`,Kr=`hide${ft}`,Hs=`hidePrevented${ft}`,js=`hidden${ft}`,zr=`resize${ft}`,Gr=`click${ft}${Ds}`,Yr=`keydown.dismiss${ft}`,Zr={backdrop:!0,keyboard:!0,scroll:!1},Xr={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class pt extends pe{constructor(e,o){super(e,o),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Zr}static get DefaultType(){return Xr}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||P.trigger(this._element,Wr,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new yn().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Us),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Rs),this._element.classList.remove(Us),P.trigger(this._element,Qr,{relatedTarget:e})},this._element,!0))}hide(){this._isShown&&(P.trigger(this._element,Kr).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Fs),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Rs,Fs),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new yn().reset(),P.trigger(this._element,js)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new Ts({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{this._config.backdrop!=="static"?this.hide():P.trigger(this._element,Hs)}:null})}_initializeFocusTrap(){return new Vs({trapElement:this._element})}_addEventListeners(){P.on(this._element,Yr,e=>{e.key==="Escape"&&(this._config.keyboard?this.hide():P.trigger(this._element,Hs))})}static jQueryInterface(e){return this.each(function(){const o=pt.getOrCreateInstance(this,e);if(typeof e=="string"){if(o[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);o[e](this)}})}}P.on(document,Gr,'[data-bs-toggle="offcanvas"]',function(l){const e=N.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&l.preventDefault(),v(this))return;P.one(e,js,()=>{m(this)&&this.focus()});const o=N.findOne(qs);o&&o!==e&&pt.getInstance(o).hide(),pt.getOrCreateInstance(e).toggle(this)}),P.on(window,jr,()=>{for(const l of N.find(qs))pt.getOrCreateInstance(l).show()}),P.on(window,zr,()=>{for(const l of N.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(l).position!=="fixed"&&pt.getOrCreateInstance(l).hide()}),Se(pt),T(pt);const Ws={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Jr=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),el=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,tl=(l,e)=>{const o=l.nodeName.toLowerCase();return e.includes(o)?!Jr.has(o)||Boolean(el.test(l.nodeValue)):e.filter(h=>h instanceof RegExp).some(h=>h.test(o))},il={allowList:Ws,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},nl={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},sl={entry:"(string|element|function|null)",selector:"(string|element)"};class ol extends ke{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return il}static get DefaultType(){return nl}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[f,p]of Object.entries(this._config.content))this._setContent(e,p,f);const o=e.children[0],h=this._resolvePossibleFunction(this._config.extraClass);return h&&o.classList.add(...h.split(" ")),o}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[o,h]of Object.entries(e))super._typeCheckConfig({selector:o,entry:h},sl)}_setContent(e,o,h){const f=N.findOne(h,e);f&&((o=this._resolvePossibleFunction(o))?a(o)?this._putElementInTemplate(u(o),f):this._config.html?f.innerHTML=this._maybeSanitize(o):f.textContent=o:f.remove())}_maybeSanitize(e){return this._config.sanitize?function(o,h,f){if(!o.length)return o;if(f&&typeof f=="function")return f(o);const p=new window.DOMParser().parseFromString(o,"text/html"),w=[].concat(...p.body.querySelectorAll("*"));for(const _ of w){const A=_.nodeName.toLowerCase();if(!Object.keys(h).includes(A)){_.remove();continue}const B=[].concat(..._.attributes),L=[].concat(h["*"]||[],h[A]||[]);for(const E of B)tl(E,L)||_.removeAttribute(E.nodeName)}return p.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return V(e,[this])}_putElementInTemplate(e,o){if(this._config.html)return o.innerHTML="",void o.append(e);o.textContent=e.textContent}}const rl=new Set(["sanitize","allowList","sanitizeFn"]),_n="fade",Si="show",Qs=".modal",Ks="hide.bs.modal",di="hover",Pn="focus",ll={AUTO:"auto",TOP:"top",RIGHT:$()?"left":"right",BOTTOM:"bottom",LEFT:$()?"right":"left"},al={allowList:Ws,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},cl={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Ot extends pe{constructor(e,o){if(bs===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,o),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return al}static get DefaultType(){return cl}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),P.off(this._element.closest(Qs),Ks,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=P.trigger(this._element,this.constructor.eventName("show")),o=(I(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!o)return;this._disposePopper();const h=this._getTipElement();this._element.setAttribute("aria-describedby",h.getAttribute("id"));const{container:f}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(f.append(h),P.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(h),h.classList.add(Si),"ontouchstart"in document.documentElement)for(const p of[].concat(...document.body.children))P.on(p,"mouseover",U);this._queueCallback(()=>{P.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!P.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Si),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))P.off(e,"mouseover",U);this._activeTrigger.click=!1,this._activeTrigger[Pn]=!1,this._activeTrigger[di]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),P.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const o=this._getTemplateFactory(e).toHtml();if(!o)return null;o.classList.remove(_n,Si),o.classList.add(`bs-${this.constructor.NAME}-auto`);const h=(f=>{do f+=Math.floor(1e6*Math.random());while(document.getElementById(f));return f})(this.constructor.NAME).toString();return o.setAttribute("id",h),this._isAnimated()&&o.classList.add(_n),o}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new ol({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(_n)}_isShown(){return this.tip&&this.tip.classList.contains(Si)}_createPopper(e){const o=V(this._config.placement,[this,e,this._element]),h=ll[o.toUpperCase()];return vn(this._element,e,this._getPopperConfig(h))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(o=>Number.parseInt(o,10)):typeof e=="function"?o=>e(o,this._element):e}_resolvePossibleFunction(e){return V(e,[this._element])}_getPopperConfig(e){const o={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:h=>{this._getTipElement().setAttribute("data-popper-placement",h.state.placement)}}]};return{...o,...V(this._config.popperConfig,[o])}}_setListeners(){const e=this._config.trigger.split(" ");for(const o of e)if(o==="click")P.on(this._element,this.constructor.eventName("click"),this._config.selector,h=>{this._initializeOnDelegatedTarget(h).toggle()});else if(o!=="manual"){const h=o===di?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),f=o===di?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");P.on(this._element,h,this._config.selector,p=>{const w=this._initializeOnDelegatedTarget(p);w._activeTrigger[p.type==="focusin"?Pn:di]=!0,w._enter()}),P.on(this._element,f,this._config.selector,p=>{const w=this._initializeOnDelegatedTarget(p);w._activeTrigger[p.type==="focusout"?Pn:di]=w._element.contains(p.relatedTarget),w._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},P.on(this._element.closest(Qs),Ks,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,o){clearTimeout(this._timeout),this._timeout=setTimeout(e,o)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const o=H.getDataAttributes(this._element);for(const h of Object.keys(o))rl.has(h)&&delete o[h];return e={...o,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:u(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[o,h]of Object.entries(this._config))this.constructor.Default[o]!==h&&(e[o]=h);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const o=Ot.getOrCreateInstance(this,e);if(typeof e=="string"){if(o[e]===void 0)throw new TypeError(`No method named "${e}"`);o[e]()}})}}T(Ot);const hl={...Ot.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},ul={...Ot.DefaultType,content:"(null|string|element|function)"};class Mi extends Ot{static get Default(){return hl}static get DefaultType(){return ul}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const o=Mi.getOrCreateInstance(this,e);if(typeof e=="string"){if(o[e]===void 0)throw new TypeError(`No method named "${e}"`);o[e]()}})}}T(Mi);const xn=".bs.scrollspy",dl=`activate${xn}`,zs=`click${xn}`,fl=`load${xn}.data-api`,ei="active",An="[href]",Gs=".nav-link",pl=`${Gs}, .nav-item > ${Gs}, .list-group-item`,gl={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},ml={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class fi extends pe{constructor(e,o){super(e,o),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return gl}static get DefaultType(){return ml}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=u(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(o=>Number.parseFloat(o))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(P.off(this._config.target,zs),P.on(this._config.target,zs,An,e=>{const o=this._observableSections.get(e.target.hash);if(o){e.preventDefault();const h=this._rootElement||window,f=o.offsetTop-this._element.offsetTop;if(h.scrollTo)return void h.scrollTo({top:f,behavior:"smooth"});h.scrollTop=f}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(o=>this._observerCallback(o),e)}_observerCallback(e){const o=w=>this._targetLinks.get(`#${w.target.id}`),h=w=>{this._previousScrollData.visibleEntryTop=w.target.offsetTop,this._process(o(w))},f=(this._rootElement||document.documentElement).scrollTop,p=f>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=f;for(const w of e){if(!w.isIntersecting){this._activeTarget=null,this._clearActiveClass(o(w));continue}const _=w.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(p&&_){if(h(w),!f)return}else p||_||h(w)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=N.find(An,this._config.target);for(const o of e){if(!o.hash||v(o))continue;const h=N.findOne(decodeURI(o.hash),this._element);m(h)&&(this._targetLinks.set(decodeURI(o.hash),o),this._observableSections.set(o.hash,h))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(ei),this._activateParents(e),P.trigger(this._element,dl,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))N.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(ei);else for(const o of N.parents(e,".nav, .list-group"))for(const h of N.prev(o,pl))h.classList.add(ei)}_clearActiveClass(e){e.classList.remove(ei);const o=N.find(`${An}.${ei}`,e);for(const h of o)h.classList.remove(ei)}static jQueryInterface(e){return this.each(function(){const o=fi.getOrCreateInstance(this,e);if(typeof e=="string"){if(o[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);o[e]()}})}}P.on(window,fl,()=>{for(const l of N.find('[data-bs-spy="scroll"]'))fi.getOrCreateInstance(l)}),T(fi);const Nt=".bs.tab",vl=`hide${Nt}`,wl=`hidden${Nt}`,yl=`show${Nt}`,bl=`shown${Nt}`,_l=`click${Nt}`,Pl=`keydown${Nt}`,xl=`load${Nt}`,Al="ArrowLeft",Ys="ArrowRight",Cl="ArrowUp",Zs="ArrowDown",Cn="Home",Xs="End",$t="active",Js="fade",In="show",eo=".dropdown-toggle",kn=`:not(${eo})`,to='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Tn=`.nav-link${kn}, .list-group-item${kn}, [role="tab"]${kn}, ${to}`,Il=`.${$t}[data-bs-toggle="tab"], .${$t}[data-bs-toggle="pill"], .${$t}[data-bs-toggle="list"]`;class Dt extends pe{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),P.on(this._element,Pl,o=>this._keydown(o)))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const o=this._getActiveElem(),h=o?P.trigger(o,vl,{relatedTarget:e}):null;P.trigger(e,yl,{relatedTarget:o}).defaultPrevented||h&&h.defaultPrevented||(this._deactivate(o,e),this._activate(e,o))}_activate(e,o){e&&(e.classList.add($t),this._activate(N.getElementFromSelector(e)),this._queueCallback(()=>{e.getAttribute("role")==="tab"?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),P.trigger(e,bl,{relatedTarget:o})):e.classList.add(In)},e,e.classList.contains(Js)))}_deactivate(e,o){e&&(e.classList.remove($t),e.blur(),this._deactivate(N.getElementFromSelector(e)),this._queueCallback(()=>{e.getAttribute("role")==="tab"?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),P.trigger(e,wl,{relatedTarget:o})):e.classList.remove(In)},e,e.classList.contains(Js)))}_keydown(e){if(![Al,Ys,Cl,Zs,Cn,Xs].includes(e.key))return;e.stopPropagation(),e.preventDefault();const o=this._getChildren().filter(f=>!v(f));let h;if([Cn,Xs].includes(e.key))h=o[e.key===Cn?0:o.length-1];else{const f=[Ys,Zs].includes(e.key);h=S(o,e.target,f,!0)}h&&(h.focus({preventScroll:!0}),Dt.getOrCreateInstance(h).show())}_getChildren(){return N.find(Tn,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,o){this._setAttributeIfNotExists(e,"role","tablist");for(const h of o)this._setInitialAttributesOnChild(h)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const o=this._elemIsActive(e),h=this._getOuterElement(e);e.setAttribute("aria-selected",o),h!==e&&this._setAttributeIfNotExists(h,"role","presentation"),o||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const o=N.getElementFromSelector(e);o&&(this._setAttributeIfNotExists(o,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(o,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,o){const h=this._getOuterElement(e);if(!h.classList.contains("dropdown"))return;const f=(p,w)=>{const _=N.findOne(p,h);_&&_.classList.toggle(w,o)};f(eo,$t),f(".dropdown-menu",In),h.setAttribute("aria-expanded",o)}_setAttributeIfNotExists(e,o,h){e.hasAttribute(o)||e.setAttribute(o,h)}_elemIsActive(e){return e.classList.contains($t)}_getInnerElement(e){return e.matches(Tn)?e:N.findOne(Tn,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each(function(){const o=Dt.getOrCreateInstance(this);if(typeof e=="string"){if(o[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);o[e]()}})}}P.on(document,_l,to,function(l){["A","AREA"].includes(this.tagName)&&l.preventDefault(),v(this)||Dt.getOrCreateInstance(this).show()}),P.on(window,xl,()=>{for(const l of N.find(Il))Dt.getOrCreateInstance(l)}),T(Dt);const Pt=".bs.toast",kl=`mouseover${Pt}`,Tl=`mouseout${Pt}`,El=`focusin${Pt}`,Vl=`focusout${Pt}`,Sl=`hide${Pt}`,Ml=`hidden${Pt}`,Bl=`show${Pt}`,Ll=`shown${Pt}`,io="hide",Bi="show",Li="showing",Ol={animation:"boolean",autohide:"boolean",delay:"number"},Nl={animation:!0,autohide:!0,delay:5e3};class pi extends pe{constructor(e,o){super(e,o),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Nl}static get DefaultType(){return Ol}static get NAME(){return"toast"}show(){P.trigger(this._element,Bl).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(io),x(this._element),this._element.classList.add(Bi,Li),this._queueCallback(()=>{this._element.classList.remove(Li),P.trigger(this._element,Ll),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(P.trigger(this._element,Sl).defaultPrevented||(this._element.classList.add(Li),this._queueCallback(()=>{this._element.classList.add(io),this._element.classList.remove(Li,Bi),P.trigger(this._element,Ml)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Bi),super.dispose()}isShown(){return this._element.classList.contains(Bi)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,o){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=o;break;case"focusin":case"focusout":this._hasKeyboardInteraction=o}if(o)return void this._clearTimeout();const h=e.relatedTarget;this._element===h||this._element.contains(h)||this._maybeScheduleHide()}_setListeners(){P.on(this._element,kl,e=>this._onInteraction(e,!0)),P.on(this._element,Tl,e=>this._onInteraction(e,!1)),P.on(this._element,El,e=>this._onInteraction(e,!0)),P.on(this._element,Vl,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const o=pi.getOrCreateInstance(this,e);if(typeof e=="string"){if(o[e]===void 0)throw new TypeError(`No method named "${e}"`);o[e](this)}})}}return Se(pi),T(pi),{Alert:nt,Button:bt,Carousel:Ht,Collapse:Wt,Dropdown:et,Modal:Lt,Offcanvas:pt,Popover:Mi,ScrollSpy:fi,Tab:Dt,Toast:pi,Tooltip:Ot}})})(ua);const Bo=zl();function Lo(c){const[i,t]=j({x:0,y:0}),[n,r]=j({x:0,y:0}),[s,d]=j(!1),[a,u]=j(null),[m,v]=j(null),[I,U]=j({x:0,y:0}),[x,b]=j(null),[M,$]=j(null),[T,V]=j({x:0,y:0}),[R,S]=j({x:0,y:0}),[F,q]=j(!1),[k,J]=j(null),[re,Y]=j(null),[ae,ve]=j({x:0,y:0}),[fe,vt]=j(null),[wt,Ct]=j(null),[ht,It]=j([]),Xe=[],P=[];De(()=>{document.addEventListener("pointermove",D=>{t({x:D.clientX,y:D.clientY}),s()&&a()&&(a().ref.style.transform=`translate(${i().x-n().x+I().x}px, ${i().y-n().y+I().y}px)`,a().ref.style.zIndex=100,a().rectangle=a().ref.getBoundingClientRect(),x()?.length>0&&$(Ft(x())))}),document.addEventListener("pointerup",D=>{a()!=null&&(a().dragEnd(M()),P.forEach(g=>{g(D)}),a()?.ref&&(a().ref.style.transform=`translate(${0}px, ${.1}px)`,a().ref.style.zIndex=0),d(!1),v(a()),u(null))}),document.addEventListener("virtualpointermove",D=>{V({x:D.clientX,y:D.clientY}),F()&&k()&&(k().ref.style.transform=`translate(${T().x-R().x+ae().x}px, ${T().y-R().y+ae().y}px)`,k().ref.style.zIndex=100,k().rectangle=k().ref.getBoundingClientRect(),fe()?.length>0&&Ct(bt(fe())))}),document.addEventListener("virtualpointerup",D=>{k()!=null&&(k().dragEnd(wt()),P.forEach(g=>{g(D)}),k()?.ref&&(k().ref.style.transform=`translate(${0}px, ${.1}px)`,k().ref.style.zIndex=0),q(!1),Y(k()),J(null))})});const yt=(D,g)=>{g!==void 0&&g.dragStart.push(D)},O=D=>{Xe.push(D)},te=D=>{P.push(D)},H=(D,g)=>{g!==void 0&&(g.dragEnd=D)},ke=(D,g)=>{g!==void 0&&(g.hoverOver=D)},pe=(D,g)=>{g!==void 0&&(g.hoverOut=D)},Ie=D=>{let g={id:D,startingPosition:{x:0,y:0},dragStart:[],dragEnd:()=>{},ref:null,rectangle:null,data:{}};return De(()=>{g.ref.addEventListener("pointerdown",ne=>{if(!g.ref.classList.contains("noDrag")){u(g);for(let Z=0;Z<g.dragStart.length;Z++)g.dragStart[Z](g);for(let Z=0;Z<Xe.length;Z++)Xe[Z](g);U(Se(ne.target.getAttribute("style"))),r({x:ne.clientX,y:ne.clientY}),d(!0),g.rectangle=g.ref.getBoundingClientRect()}}),g.ref.addEventListener("virtualpointerdown",ne=>{if(!!g.ref.classList.contains("noDrag")){J(g);for(let Z=0;Z<g.dragStart.length;Z++)g.dragStart[Z](g);for(let Z=0;Z<Xe.length;Z++)Xe[Z](g);ve(Se(ne.target.getAttribute("style"))),S({x:ne.clientX,y:ne.clientY}),q(!0),g.rectangle=g.ref.getBoundingClientRect()}})}),g},N=D=>{let g={id:D,startingPosition:{x:0,y:0},hoverOver:()=>{},hoverOut:()=>{},ref:null,rectangle:null,hovering:!1,occupied:!1,droppable:!0};return It([...ht(),g]),De(()=>{g.rectangle=g.ref.getBoundingClientRect(),g.ref.querySelector(".piece")!==null&&(g.occupied=!0),document.addEventListener("pointermove",()=>{if(a()==null||a().rectangle==null)return;let ne=a().ref.getBoundingClientRect(),Z=g.ref.getBoundingClientRect();if(ne.top>Z.bottom||ne.right<Z.left||ne.bottom<Z.top||ne.left>Z.right){if(kt(g),!g.hovering)return;g.hovering=!1,g.hoverOut(a())}else{if(g.ref===M()?.ref){if(g.hovering)return;g.hovering=!0,g.hoverOver(a())}else g.hovering=!1,g.hoverOut(a());it(g)}}),document.addEventListener("pointerdown",()=>{if(a()==null||a().rectangle==null)return;let ne=a().ref.getBoundingClientRect(),Z=g.ref.getBoundingClientRect();if(ne.top>Z.bottom||ne.right<Z.left||ne.bottom<Z.top||ne.left>Z.right){if(kt(g),!g.hovering)return;g.hovering=!1,g.hoverOut(a())}else{if(g.ref===M()?.ref){if(g.hovering)return;g.hovering=!0,g.hoverOver(a())}else g.hovering=!1,g.hoverOut(a());it(g)}x()?.length>0&&$(Ft(x()))}),document.addEventListener("pointerup",()=>{!g.hovering||(g.hovering=!1,g.hoverOut(m()),m()!=null&&g.droppable!==!1&&(g.ref.querySelector(".piece")!==null?g.ref.querySelector(".piece").remove():g.ref.querySelector(".circle")!==null&&g.ref.querySelector(".circle").remove(),g.ref.appendChild(m().ref)))}),document.addEventListener("virtualpointermove",()=>{if(k()==null||k().rectangle==null)return;let ne=k().ref.getBoundingClientRect(),Z=g.ref.getBoundingClientRect();if(ne.top>Z.bottom||ne.right<Z.left||ne.bottom<Z.top||ne.left>Z.right){if(Tt(g),!g.hovering)return;g.hovering=!1,g.hoverOut(k())}else{if(g.ref===wt()?.ref){if(g.hovering)return;g.hovering=!0,g.hoverOver(k())}else g.hovering=!1,g.hoverOut(k());nt(g)}}),document.addEventListener("virtualpointerdown",()=>{if(k()==null||k().rectangle==null)return;let ne=k().ref.getBoundingClientRect(),Z=g.ref.getBoundingClientRect();if(ne.top>Z.bottom||ne.right<Z.left||ne.bottom<Z.top||ne.left>Z.right){if(Tt(g),!g.hovering)return;g.hovering=!1,g.hoverOut(k())}else{if(g.ref===wt()?.ref){if(g.hovering)return;g.hovering=!0,g.hoverOver(k())}else g.hovering=!1,g.hoverOut(k());nt(g)}fe()?.length>0&&Ct(bt(fe()))}),document.addEventListener("virtualpointerup",()=>{!g.hovering||(g.hovering=!1,g.hoverOut(re()),re()!=null&&g.droppable!==!1&&(g.ref.querySelector(".piece")!==null?g.ref.querySelector(".piece").remove():g.ref.querySelector(".circle")!==null&&g.ref.querySelector(".circle").remove(),g.ref.appendChild(re().ref)))})}),ht()[ht().length-1]};function Se(D){if(D===null)return{x:0,y:0};let g=D.split("translate(")[0],ne;return g&&(ne=D.split("translate(")[1].split(")")[0].split("px, ")),{x:parseInt(ne[0]),y:parseInt(ne[1])}}function it(D){x()==null&&b([D]),!x().includes(D)&&(x()?.includes(D)||b([...x(),D]))}function kt(D){x()!=null&&(!x()?.includes(D)||x().includes(D)&&b(x()?.filter(g=>g!==D)))}function Ft(D){if(D==null)return;let g=a().ref.getBoundingClientRect();return D.sort((Z,li)=>{let Me=Z.ref.getBoundingClientRect(),Be=li.ref.getBoundingClientRect(),ut,He,Te,st,Je,je;return g.x>Me.x?ut=Me.right-g.x:ut=g.right-Me.x,g.bottom>Me.bottom?He=Me.bottom-g.top:He=g.bottom-Me.top,Je=ut*He,g.x>Be.x?Te=Be.right-g.x:Te=g.right-Be.x,g.bottom>Be.bottom?st=Be.bottom-g.top:st=g.bottom-Be.top,je=Te*st,je-Je})[0]}function nt(D){fe()==null&&vt([D]),!fe().includes(D)&&(fe()?.includes(D)||vt([...fe(),D]))}function Tt(D){fe()!=null&&(!fe()?.includes(D)||fe().includes(D)&&vt(fe()?.filter(g=>g!==D)))}function bt(D){if(D==null)return;let g=k().ref.getBoundingClientRect();return D.sort((Z,li)=>{let Me=Z.ref.getBoundingClientRect(),Be=li.ref.getBoundingClientRect(),ut,He,Te,st,Je,je;return g.x>Me.x?ut=Me.right-g.x:ut=g.right-Me.x,g.bottom>Me.bottom?He=Me.bottom-g.top:He=g.bottom-Me.top,Je=ut*He,g.x>Be.x?Te=Be.right-g.x:Te=g.right-Be.x,g.bottom>Be.bottom?st=Be.bottom-g.top:st=g.bottom-Be.top,je=Te*st,je-Je})[0]}return K(Bo.Provider,{value:{onDragEnd:H,onDragStart:yt,createDraggable:Ie,onHoverOver:ke,createDroppable:N,onHoverOut:pe,onGlobalDragStart:O,onGlobalDragEnd:te},get children(){return c.children}})}const bo=()=>Gl(Bo);var da=_e("<div class=number-right style=pointer-events:none;>"),fa=_e("<div class=number-left style=pointer-events:none;>"),pa=_e("<div>"),ga=_e("<section class=noDrag>");function Oo({className:c,board:i,setDisplayInlay:t,setDisplayInlayX:n,displayInlay:r,movePieceSound:s,capturePieceSound:d,index:a,id:u,setCrowningMove:m,color:v}){De(()=>{window.board=i});const I=({id:b,className:M,draggable:$,board:T})=>{const{onHoverOver:V,createDroppable:R,onHoverOut:S,onGlobalDragStart:F,onGlobalDragEnd:q}=bo(),k=R(b);return V(J=>{k.ref.classList.add("hovered")},k),S(J=>{k.ref.classList.remove("hovered")},k),F(J=>{if(T().moveIndex==T().History.length-1&&!r())if(J.data.legalPieceMoves.includes(k.id)){if(k.ref.children.length===0||k.ref.querySelector(".piece")==null){k.droppable=!0;let re=document.createElement("section");re.classList.add("circle"),k.ref.appendChild(re)}else if(k.ref.children.length>0&&k.ref.querySelector(".piece")!=null){k.droppable=!0;let re;for(let Y=0;Y<k.ref.children.length;Y++)k.ref.children[Y].classList.contains("piece")&&(re=k.ref.children[Y]);re.children[0]?.classList.add("circle")}}else k.droppable=!1}),q(J=>{if(T().moveIndex!=T().History.length-1)return;let re=k.ref.querySelectorAll("section.circle");for(let ae=0;ae<re.length;ae++)re[ae].remove();let Y=k.ref.querySelectorAll("div.circle");for(let ae=0;ae<Y.length;ae++)Y[ae].classList.remove("circle")}),(()=>{var J=pa(),re=k.ref;return typeof re=="function"?wo(re,J):k.ref=J,Dn(J,"id",b),Zi(J,M),ye(J,K(Ee,{when:$!=null,children:$}),null),ye(J,K(Ee,{get when(){return b[1]==="8"&&v==="black"||b[1]==="1"&&v==="white"},get children(){var Y=da();return ye(Y,()=>b[0]),Y}}),null),ye(J,K(Ee,{get when(){return b[0]==="h"&&v==="black"||b[0]==="a"&&v==="white"},get children(){var Y=fa();return ye(Y,()=>b[1]),Y}}),null),J})()},U=({id:b,board:M})=>{const{onDragStart:$,onDragEnd:T,createDraggable:V}=bo(),R=V(b);let S,F;$(()=>{if(r()||M().moveIndex!=M().History.length-1)return;S=R.ref.parentElement.id;let Y=M().findLegalMoves(M());Y.length===0&&(M().checkMate=!0);let ae=[];for(let ve=0;ve<Y.length;ve++)Y[ve].start==S&&ae.push(Y[ve].end);R.data.legalPieceMoves=ae},R),T(async Y=>{if(M().moveIndex!=M().History.length-1||Y==null||r())return;let ae=M().getPieceByPosition(S),ve=ae.UIComponent;if(ae.type==="p"&&ae.color===v){if(ae.color==="white"&&Y?.id[1]==="8"){await x(100),t(!0);let fe=ve.parentNode.id;fe=fe.charCodeAt(0)-97,n(fe),m({from:S,to:Y.id});return}else if(ae.color==="black"&&Y.id[1]==="1"){await x(100),t(!0);let fe=ve.parentNode.id;fe=fe.charCodeAt(0)-97,n(fe),m({from:S,to:Y.id});return}}R.droppable!==!1&&(F=Y?.id,M().moveLegally(S,F))},R);const q=M().getPieceByPosition(b)?.color,k=v===q;let J=M().getPieceByPosition(b);if(J===void 0)return(()=>{var Y=ga(),ae=R.ref;return typeof ae=="function"?wo(ae,Y):R.ref=Y,Y})();J.noDrag=!k;let re=J.UIComponent;return R.ref=re,re.ref=R.ref,re};function x(b){return new Promise(M=>setTimeout(M,b))}return K(I,{className:c,id:u,board:i,get draggable(){return K(U,{board:i,id:u})}})}var ma=_e("<div class=catLogo>");function Ki({catLink:c}){return(()=>{var i=ma();return mt(t=>aa(i,`background-image: url(${c})`,t)),i})()}var va=_e("<div class=ScoreNPieces><div class=score>"),wa=_e('<section><div class=""> ');function No({color:c,board:i}){const[t,n]=j([]),[r,s]=j(0);return De(()=>{document.addEventListener("boardUpdated",()=>{n([]),s(0);let d=i().capturedPieces;for(let a=0;a<d.length;a++)switch(d[a].color!=c&&n([...t(),d[a]]),d[a].type){case"p":d[a].color==c?s(r()+-1):s(r()+1);break;case"n":d[a].color==c?s(r()+-3):s(r()+3);break;case"b":d[a].color==c?s(r()+-3):s(r()+3);break;case"r":d[a].color==c?s(r()+-5):s(r()+5);break;case"q":d[a].color==c?s(r()+-9):s(r()+9)}})}),(()=>{var d=va(),a=d.firstChild;return ye(a,(()=>{var u=Ze(()=>r()!=0);return()=>u()?r():""})()),ye(d,K(Yi,{get each(){return t()},children:u=>(()=>{var m=wa();return mt(()=>Zi(m,`eatenPiece ${c=="white"?u.type:u.type.toUpperCase()}`)),m})()}),null),d})()}const Rn="data:audio/mpeg;base64,SUQzBAAAAAABH1RFTkMAAAALAAADUHJvIFRvb2xzAFRYWFgAAAAjAAADb3JpZ2luYXRvcl9yZWZlcmVuY2UAYWFPNEt0IUJLdlNrAFREUkMAAAAMAAADMjAxOS0wNC0yMQBUWFhYAAAAGgAAA3RpbWVfcmVmZXJlbmNlADE3MjgwMDAwMABUU1NFAAAADwAAA0xhdmY1OC4yOS4xMDAAAAAAAAAAAAAAAP/7VAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEluZm8AAAAPAAAACAAADMAALS0tLS0tLS0tLS0tS0tLS0tLS0tLS0tLaWlpaWlpaWlpaWlpaYeHh4eHh4eHh4eHh6WlpaWlpaWlpaWlpaXDw8PDw8PDw8PDw8Ph4eHh4eHh4eHh4eHh////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQE5gAAAAAAAAzAei0vIf/7lGQAAAMuHciFc0ACKuFWcqGYABC8uU9ZrIAQvopiQzUgADDQIHQuY1I5kkbmEQMZCOBo5LGfhoY3Q5wCCG7FcZeABikmmUyCEDYxYSDJgwFBCeTceaYaoQlKYUGq8uYBgjTQICBQBgl7O5DEOXqSxunjcvp8+///nXp6enpKSkpMGQ8AAAAAVASoEJwMWaIIFnEIOBiwgDC0xA4+sH1AgUBA4XeD/KHP/KOBB2Iz/8oc4PgAAAV9uRSW0SBsALDmsjFUiIVimojFGpsmc0mEHFEgmImJJGdXBQmCU7d1xiRADooPLkDg3Tlo1aDtFMBZFBHFy8KHqaa4WEtu/DhbYDWszG5ukhTXYo8butg1ayrU0pl/f/3Wgvdbk5SZ3O1cr+W98/79S93//LKmEAY9bwE5c274qni5H6i+zFmyQGVb9iwZ0OLDTNIQtIz9JN/B44YsS8DsQxmDdxty3QJkkDLoPRNX/t/KqgA/AQBAxudAcqzBpfMoGwyjGTUw1P/7lGQKjNP7PEoXciAAMKIIwuy8AA40mRItpHRAvgnjjPSKCMvrY0aVAMPiIWG3ouayUpjwZmEhIIwqYgDJigBC2gLABTENAWoLgckQqLhHCQIMjBYcIJGJAiDJF01GVNT02U5w6Ymqkkq1o2RZToLqSUtSSWu3mJrRpLqW1J/3WrutaKKLTM9mwMnW54TBIAGFVQwoBg8EHKXCBUOHL9KRM69DVlqA5E1S5NUpxHiEnmW4ucVtnVdo/gj6n/RrCIeMjIUgxXINrUzbAEyO4OajQEgBVIMREDMUw3IcNDWTru83qTNagzJCciABx9FmgqgQNEgUFMWrKzNaZW77AQ0wAJsgbBUUAkiSRY4CjAJEG/tUL0goDpAuD7n0KNdIodOvt29UXOgUNVm1Xu+z+ixQcg53hkEpCFI8eoMUHKeQUgQEE6BpMpOCCDHKVHHAfXCFxiNQbqBdFFRRHGsgUjbVBCADEgMKGps3iDRM0aBOSPgcfGbNBjqeY45m9Uxgif/7lGQPjNNfIsMTeCtANMJ4kWMpOguUTwwtZYzA/InhQawhmKXTNCmRp5MVDOU1/A3D4dVADBS8Vgh54GUt0FgsCkLuOpTUciUDuFmhr2R5aCScrDJHGOjw66jPSLou5cks/9C9hKt65fbxCGR12hUqwEw5IgHIQUIpsF3EyB3sSWMNwxgDIjKkoDEJCkU5YqdqzP3kiKhkneX0NGrTjtZSzCLdP2oAvMgcm5DmDHnTqnTWgKIZwydHMZpYcXMG3Bt2YmmGDjFGj4raZzajqdEAqPzLvQY5a44rs5OAqNDz21SsJBpx2pinhsBHHrW6/1ertWxdFC6kMRXqeq2l96eK5CnRDHlY0HNg1NPRF9R0w4mMNcRMn+KTIFYmDImSMBQgecB/CuAHYZKokKsCz36tsNXiyaeNwksVdC/8AWiwSWpCUIAsSwTGQoGE5hscCkptEJssKg5g0Z4VZyyhxHhwBZka4OGGSIGtSk0ZRZGMcFkRqGWmOqxCsj40bgcsg//7lGQfDtL/IEKDellwSQKIMGd4Ggx4TwYtc0aQ9YjhxbxoiEeWJ246o3+K9t3wx/VytFNdclWyUV6+1Ewr6jWhvrdlvy7wBZExnztBL8DMEbOFGyERtxgBEo3SGNxVTKjcRm5goKBAZYM1YvPWgqY0vRfEJQYKCmjsZVFld0+7h4ZWtQ7INGw/RkkC4uXSEQASUYVRANQMqMZhOkDBSQBXoyqRgwynKh+YKFAOjRgYHGFinQIGNAGJiCxhMkeBpgsjas4THpuGIRFo9NXbv3KaRCRxwqNLAit5UBKeWi307S2//I2KJEsq76Nt/4yVZ5uowi25CHEwEGMPDjNogxGOkjbc0CMEoJ5YcfMmRAyV/VhDJiCyQVAQQlsvFb87ZgZrzKqCpZj33R4SVdrRuYprI0BmkhpQXnap5yP+ZKqm3zZoTMZ/CmI8x4x0UOBzKYbeIobmZZnPGnjEiqIxKMmVoPGMFvHCFY0ZCIG9y4BQc8VVaYkmvvbDXrbOXaenpf/7lGQoD/LbH7+DemMwTSPIEG8naExogvgObYlBTY8fwb0lmG8tWwfjGz//yvZ9DkAYHAycYyUNTOTEjXGAw93MsfQSemCox1SgYKamTuhACElghTDoSIA01gsyEMAQVAGwRiDsIeuwhTFYKi8s1AzCwOaim284yvHVLQpWNhUnmREkJOALFU5M6DY6jOKQg5wPTn6uNFagMsH4gRybSBkMxAAK2U6onMOOzPyQxolMHAAQPD0WAQhHNO0OS1Fl9LggA2EY4m68tDf4XfhirsVuZi09Z1pL3R5AzknH//5ZsRAhmPAprSYnqbRmmHpgBwDVDA4kfNdWThk0ws5PiQTJFsylw4pAQHjwZTABS3LZwqgGRzdV9MuZ6mgtQRAECyM45NEvStZXzx+ZDLxXpzYYF/TVjAIHzBxIwIbM7FDG1QARhqB+dPJg6bOtfTyVY5NBOCcDBjsxsOMtNjGFk+4TM3NCI2BTHbFVlWoy3gIyABx4io7bFXutzXJA8+c1Z//7lGQmD/LYID6DeTPAVgQH0G8GhAuUgPYOaStBNI5fgbyVoQtTT/eYX/qrSCTKRW1TaF9Eo2ckRFDeLgZlGodSREXAO5JprwOmJjBgdOpmDFpgRAZHHArOMiGTUhswQCDB4vsYTDB0+4Id8yjW4509JXslUzGzSylk0HbW/di7Kmi9cC2LF6nrVOIAYZ5NRnwWjKgNKL4xsDjRsrM1EQBU8xIyQRJCNGexCePiaCuCQZuUpkFZi05gnIhQJfGfTrmeZ2RIc4Sb87CHCkDGZC2OhaKsZ3tXO6yFwpH46V1YhPrzT2d8SVVVgQFGNFxltsaWxHmtAEXCagNShSFHCRo1IVMXMwRicYxvGnBCBBTfVdAVGGS1gplphc5orBJt93mg+/NOKgdzXJ21IPMQRVAHJ211RoSJjscXTKEAS9TSRI3dZPKOTVyQzsxBcYmEb8SGJqZk4OaeDmHXp7+i4giUIFAEe/zhP+glTdbmyd35Q1vCW7BxY8gc7PsyvK9Jqf/7lGQmj/KeID2DeTOwVEPH0HNoPgoQUPYMbyGJVA8egc0Nce6rSTHaP6X/GAYJDUWIBggPmP4cZ2HoVCgQ2GgDppP+bPLmsmh1LMZoWGFBRNGFwS9AyRCgYFwUDAosBtEwaECgJNK9bmWWapqtCGGGVVnvt9yzd4hzBHBtDuoCGEETSxADNAKJThz4zIDMPPDTUoyI5OINzb0gy8sNQgTOCYyNTNOGzSjUyZgsSJHGIKZCKACRqbNacVmzgSOJtN+rqZjk/pNV7tqigVI2yiT5MEggw0NRYTmPkYaBdpuogGWwWYPA5FKzcg6OTpI8uQ2yEyI8w+g2uc9VApSEo4HVyyCcZqmaQCtrpMPZIw3sSZDIL2dZ62a73yt3lIubUMfRLMwVMCeNOSMA/Hxp18xg7J6iJxZAoVNJFMVgDUUE/zU1cQeZCgs1Bsx8IywQ1ZwVDgoq8S7nGglUrxqavVA0t1vVXdmta2bz/+YYVVJJdGFVFF83z0w841aMFgTShP/7lEQtj/JfFLiDW9ICSeJ3AGssWEAAAaQAAAAgAAA0gAAABDSGTXyjF3DZrwOZO9wyHRWAyzQOCZKSCAoKLog0RDMMJROf90k9mHq9BI7ULmz05WPEhs0x27/3fUSJTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==";var ya=_e('<div class=arrows><div><svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=2.5 stroke=currentColor class="w-7 h-7"><path stroke-linecap=round stroke-linejoin=round d="M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"></path></svg></div><div><svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=2.5 stroke=currentColor class="w-7 h-7"><path stroke-linecap=round stroke-linejoin=round d="M15.75 19.5L8.25 12l7.5-7.5"></path></svg></div><div><svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=2.5 stroke=currentColor class="w-7 h-7"><path stroke-linecap=round stroke-linejoin=round d="M8.25 4.5l7.5 7.5-7.5 7.5"></path></svg></div><div><svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=2.5 stroke=currentColor class="w-7 h-7"><path stroke-linecap=round stroke-linejoin=round d="M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5">');function ba({board:c}){function i(){let u=window.innerHeight,m=document.querySelector(".arrows"),U=document.querySelector(".chessBoard").getBoundingClientRect().height,M=document.querySelector(".userNameWidgetHolder").getBoundingClientRect().height,$=U+M*2,T=(u-$)/2+$;m.style.top=`${T}px`}const t=new Audio(Rn);let n=!1;De(()=>{i(),window.addEventListener("resize",()=>{i()})});async function r(u=!0){for(let m=c().moveIndex;m>-1;m--)await s(u);c().inLastMove=!1,t.play()}async function s(u=!1){if(n=!0,c().History.length===0){n=!1;return}if(c().inLastMove=!1,c().moveIndex===-1){n=!1;return}await c().executeUIMoveReverse(c().History[c().moveIndex],u),c().moveIndex--,c().setLastMoveUIIndicator(c().History[c().moveIndex]),n=!1}async function d(u=!1){if(n=!0,c().History.length===0){n=!1;return}if(c().moveIndex===0&&(c().inLastMove=!0),c().moveIndex===c().History.length-1){c().inLastMove=!0,n=!1;return}await c().executeUIMove(c().History[c().moveIndex+1],u),c().moveIndex++,c().setLastMoveUIIndicator(c().History[c().moveIndex]),n=!1}async function a(u=!0){for(let m=c().moveIndex;m<c().History.length-1;m++)await d(u);t.play(),c().inLastMove=!0}return(()=>{var u=ya(),m=u.firstChild,v=m.nextSibling,I=v.nextSibling,U=I.nextSibling;return m.$$click=async()=>{n===!1&&r()},v.$$click=async()=>{n===!1&&s()},I.$$click=async()=>{n===!1&&d()},U.$$click=async()=>{n===!1&&a()},u})()}Ut(["click"]);var _a=_e('<div class="userNameWidgetHolder user"><div class=userNameWidget><div class=userName>');function $o({user:c,color:i,board:t,moves:n,allPieces:r,setAllPieces:s}){function d(){let m=document.querySelector(".chessBoard").getBoundingClientRect().height,v=window.innerHeight,I=document.querySelector(".userNameWidgetHolder.user");I.getBoundingClientRect(),I.style.top=`${m+(v-m)/2}px`}return De(()=>{d(),window.addEventListener("resize",()=>{d()})}),[(()=>{var a=_a(),u=a.firstChild,m=u.firstChild;return ye(m,()=>c()?.username||"404 not found"),ye(u,K(Ki,{get catLink(){return Ze(()=>!!c()?.CatUrl)()?c()?.CatUrl:"https://cdn2.thecatapi.com/images/dt5.jpg"}}),null),ye(a,K(No,{color:i,board:t}),null),a})(),K(ba,{board:t})]}var Pa=_e('<div class="userNameWidgetHolder opponent"><div class=userNameWidget><div class=userName>');function Do({opponent:c,color:i,board:t}){function n(){let d=document.querySelector(".chessBoard").getBoundingClientRect().height,a=window.innerHeight,u=document.querySelector(".userNameWidgetHolder.opponent"),v=u.getBoundingClientRect().height;u.style.top=`${(a-d)/2-v}px`}return De(()=>{n(),window.addEventListener("resize",()=>{n()})}),(()=>{var r=Pa(),s=r.firstChild,d=s.firstChild;return ye(d,()=>c()?.username||"404 not found"),ye(s,K(Ki,{get catLink(){return Ze(()=>!!c()?.CatUrl)()?c()?.CatUrl:"https://cdn2.thecatapi.com/images/dt5.jpg"}}),null),ye(r,K(No,{color:i,board:t}),null),r})()}var xa=_e('<div><div class=chessInlaySquare id=queenSelection><div class="piece Q"></div></div><div class=chessInlaySquare id=knightSelection><div class="piece N"></div></div><div class=chessInlaySquare id=rookSelection><div class="piece R"></div></div><div class=chessInlaySquare id=bishopSelection><div class="piece B">'),Aa=_e("<div class=chessBoard>");function Ca({board:c,movePieceSound:i,capturePieceSound:t,moves:n,user:r,opponent:s,inGame:d,allPieces:a,setAllPieces:u}){let m=v();De(()=>{setTimeout(()=>{c().Pieces.forEach(F=>F.syncUIClass())},700)});function v(){let S=[];for(let F=0;F<8;F++)for(let q=0;q<8;q++)S.push(`${String.fromCharCode(97+q)}${8-F}`);return S}const[I,U]=j(!1),[x,b]=j("00"),[M,$]=j(""),[T,V]=j();async function R(S){$(S),U(!1);let F=T();c().moveLegally(F.from,F.to,S.toLowerCase())}return[K(Ee,{get when(){return d()},get children(){return K(Do,{opponent:s,color:"black",board:c})}}),(()=>{var S=Aa();return ye(S,K(Lo,{get children(){return[K(Ee,{get when(){return I()},get children(){var F=xa(),q=F.firstChild,k=q.nextSibling,J=k.nextSibling,re=J.nextSibling;return q.$$click=()=>R("Q"),k.$$click=()=>R("N"),J.$$click=()=>R("R"),re.$$click=()=>R("B"),mt(()=>Zi(F,`chessInlay ml-[${x()}]`)),F}}),K(Yi,{get each(){return c().board},children:(F,q)=>K(Oo,{get className(){return`chessSquare ${q()%16<8?q()%2==0?"lighterBackground":"":q()%2==0?"":"lighterBackground"}`},get id(){return m[q()]},get index(){return q()},board:c,setDisplayInlay:U,setDisplayInlayX:b,inlaySelection:M,displayInlay:I,color:"white",movePieceSound:i,capturePieceSound:t,setCrowningMove:V})})]}})),S})(),K(Ee,{get when(){return d()},get children(){return K($o,{user:r,color:"white",board:c,moves:n,allPieces:a,setAllPieces:u})}})]}Ut(["click"]);var Ia=_e('<div><div class=chessInlaySquare id=queenSelection><div class="piece q"></div></div><div class=chessInlaySquare id=knightSelection><div class="piece n"></div></div><div class=chessInlaySquare id=rookSelection><div class="piece r"></div></div><div class=chessInlaySquare id=bishopSelection><div class="piece b">'),ka=_e("<div class=chessBoard>");function Ta({board:c,movePieceSound:i,capturePieceSound:t,moves:n,user:r,opponent:s,inGame:d,allPieces:a,setAllPieces:u}){let m=v();function v(){let S=[];for(let F=0;F<8;F++)for(let q=0;q<8;q++)S.push(`${String.fromCharCode(97+q)}${8-F}`);return S}De(()=>{setTimeout(()=>{c().Pieces.forEach(F=>F.syncUIClass())},700)});const[I,U]=j(!1),[x,b]=j("00"),[M,$]=j(""),[T,V]=j();async function R(S){$(S),U(!1);let F=T();c().moveLegally(F.from,F.to,S.toLowerCase())}return[K(Ee,{get when(){return d()},get children(){return K(Do,{opponent:s,color:"white",board:c})}}),(()=>{var S=ka();return ye(S,K(Lo,{get children(){return[K(Ee,{get when(){return I()},get children(){var F=Ia(),q=F.firstChild,k=q.nextSibling,J=k.nextSibling,re=J.nextSibling;return q.$$click=()=>R("q"),k.$$click=()=>R("n"),J.$$click=()=>R("r"),re.$$click=()=>R("b"),mt(()=>Zi(F,`chessInlay ml-[${7-parseInt(x())}]`)),F}}),K(Yi,{get each(){return c().board},children:(F,q)=>K(Oo,{get className(){return`chessSquare ${(c().board.length-1-q())%16<8?(c().board.length-1-q())%2==0?"lighterBackground":"":(c().board.length-1-q())%2==0?"":"lighterBackground"}`},get id(){return m[c().board.length-1-q()]},get index(){return c().board.length-1-q()},board:c,setDisplayInlay:U,setDisplayInlayX:b,inlaySelection:M,displayInlay:I,color:"black",movePieceSound:i,capturePieceSound:t,setCrowningMove:V})})]}})),S})(),K(Ee,{get when(){return d()},get children(){return K($o,{user:r,color:"black",board:c,moves:n,allPieces:a,setAllPieces:u})}})]}Ut(["click"]);class Ea{from;to;type;constructor(i,t,n){this.from=i,this.to=t,this.type=n}}class mi{id;username;CatUrl;last_seen=Date.now();inGame=!1;constructor(i,t,n){this.id=i,this.username=t,this.CatUrl=n}}class Va{from;fromUserColor;to;gameID;type="createGame";constructor(i,t){this.from=i,this.to=t,this.fromUserColor=Math.random()>.5?"white":"black",this.gameID=this.generateRandomId()}generateRandomId(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}}class Ui{x;y;constructor(i,t){this.x=i,this.y=t}}class Bn{from;to;position;screen;type="virtualMouseEvent";eventType;chessBoardWidth;constructor(i,t,n,r,s){this.from=i,this.to=t,this.position=n,this.screen=new Ui(window.innerWidth,window.innerHeight),this.chessBoardWidth=r,this.eventType=s}}class Di{from;to;endFen;crowning=!1;eating=!1;capturePiece="";crownedTo="";castle=!1;turnColor="";enPassant=!1;enPassantSquare="";constructor(i,t,n){this.from=i,this.to=t,this.endFen=n}}class Sa{fen;from;to;type="chessGameUpdate";turn;moves;constructor(i,t,n,r,s){this.fen=i,this.from=t,this.to=n,this.turn=r,this.moves=s}}var Ma=_e(`<div class=glassOverlay><label for=username>Choose your username</label><div class=userNameInput><input type=username placeholder=username id=userNameInput></div><button class=submitUsernameButton>LET'S GO<svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 stroke=currentColor class="w-6 h-6 arrow"><path stroke-linecap=round stroke-linejoin=round d="M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3">`);const Ba=({user:c,setUser:i,setInSession:t,chessWebSocket:n})=>{let r="";const[s,d]=j(""),a=async()=>{if(r===""){alert("Please enter a username");return}if(r.length>10&&(r=r.slice(0,10)),r===c()?.username){let v=new mi(_o(),r,s());sessionStorage.setItem("gabrielmalek/chess.data",JSON.stringify({id:v.id,username:v.username,CatUrl:v.CatUrl})),localStorage.setItem("gabrielmalek/chess.data",JSON.stringify({id:v.id,username:v.username,CatUrl:v.CatUrl})),i(v),t(!0),n.beginPinging(c);return}let m=new mi(_o(),r,s());i(m),console.log(),n.beginPinging(c),console.log(m,m.id),n.pingWebSocket(m),sessionStorage.setItem("gabrielmalek/chess.data",JSON.stringify({id:m.id,username:m.username,CatUrl:m.CatUrl})),localStorage.setItem("gabrielmalek/chess.data",JSON.stringify({id:m.id,username:m.username,CatUrl:m.CatUrl})),t(!0)};async function u(){return(await(await fetch("https://api.thecatapi.com/v1/images/search")).json())[0].url}return De(()=>{document.addEventListener("keyup",function(v){v.key==="Enter"&&a()});let m=document.getElementById("userNameInput");m?.focus(),console.log(c()?.username),c()?.username!==void 0&&(m.value=c()?.username,r=m.value),u().then(v=>{d(v)})}),(()=>{var m=Ma(),v=m.firstChild,I=v.nextSibling,U=I.firstChild,x=I.nextSibling;return U.$$keyup=b=>r=b.currentTarget.value,x.$$click=()=>a(),m})()};function _o(){let c="";for(let i=0;i<20;i++)c+=Math.floor(Math.random()*10);return c}Ut(["keyup","click"]);var La=_e('<div class=bellContainer><div class=dropdown><button class=bellIcon type=button data-toggle=dropdown aria-haspopup=true aria-expanded=false id=dropdownMenuButton><svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"stroke-width=1.5 stroke=currentColor class="w-16 h-16"><path stroke-linecap=round stroke-linejoin=round d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0M3.124 7.5A8.969 8.969 0 015.292 3m13.416 0a8.969 8.969 0 012.168 4.5"></path></svg></button><div class=dropdown-menu aria-labelledby=dropdownMenuButton>');function Oa({onClick:c,notifications:i}){return c=()=>{console.log("bell clicked"),console.log(i());let t=document.querySelector(".dropdown-menu");console.log(t),t.style.display=="block"?t.style.display="none":t.style.display="block",t.innerHTML="";for(let n=0;n<i().length;n++){let r=document.createElement("div"),s=document.createElement("div"),d=document.createElement("div");d.classList.add("username"),d.innerText=i()[n].from.username,r.classList.add("dropdown-item"),r.id=i()[n].from.id,s.classList.add("text"),s.classList.add("notificationText"),s.appendChild(d),s.innerHTML="\u{1F514}&nbsp"+s.innerHTML+"&nbsp wants to play ",r.appendChild(s),t.appendChild(r),console.log(r,"hi")}},De(()=>{document.addEventListener("click",function(t){let n=document.querySelector(".dropdown-menu"),r=document.querySelector(".bellIcon"),s=t.target;do{if(s==r)return;s=s.parentNode}while(s);n.style.display="none"})}),(()=>{var t=La(),n=t.firstChild,r=n.firstChild;return la(r,"click",c,!0),t})()}Ut(["click"]);var Na=_e('<div class="glassOverlay users_list"><h2>Online Players \u{1F7E2}</h2><ul class=list><li class=listItem id=mainUser><div class=text>'),$a=_e('<div class="absolute left-3 text-red-500">Notification sent!'),Da=_e('<div class="modal fade "id=exampleModal tabindex=-1 aria-labelledby=exampleModalLabel aria-hidden=true><div class="modal-dialog absolute top-[39vh] left-1/ "><div class="modal-content w-[50px] "><div class=modal-header><h1 class="modal-title fs-5"id=exampleModalLabel>Play Chess with </h1><button type=button class=btn-close data-bs-dismiss=modal aria-label=Close></button></div><div class=modal-body>Play online with this player right now!</div><div class=modal-footer><button type=button class="btn btn-secondary"data-bs-dismiss=modal>Close</button><button type=button class="btn btn-primary">Play Chess'),Ra=_e("<li class=listItem data-bs-toggle=modal data-bs-target=#exampleModal><div class=text>");function Ua({users:c,user:i,setNotificationUser:t,onNotificationReceived:n,chessWebSocket:r}){const[s,d]=j(),[a,u]=j(!1),[m,v]=j([]),[I,U]=j([]),[x,b]=j(!1);Hi(()=>{console.log("main user: ",i()),console.log("users in UsersList: ",c());let T=document.getElementsByClassName("listItem");setTimeout(()=>{for(let V=0;V<T.length;V++)T[V].classList.add("visible_list_item")},100)}),De(()=>{document.addEventListener("notification",T=>{console.log("notification event received");const V=JSON.parse(T.data);if(n(V),V.type!="promptForGame")return;t(V.from),console.log("notification received:",V);for(let S=0;S<m().length;S++)if(m()[S].from.id==V.from.id)return;let R=m();R.push(V),v(R),b(!0)})});function M(T){d(T),document.getElementById("exampleModal")?.style.setProperty("display","flex")}async function $(T){for(let R=0;R<I().length;R++)if(I()[R].to.id==T.to.id)return;let V=I();V.push(T),U(V),r.sendNotification(T)}return[K(Ee,{get when(){return x()},get children(){return K(Oa,{notifications:m,onClick:()=>{}})}}),(()=>{var T=Na(),V=T.firstChild,R=V.nextSibling,S=R.firstChild,F=S.firstChild;return ye(F,()=>i().username),ye(S,K(Ki,{get catLink(){return i().CatUrl}}),null),ye(R,K(Yi,{get each(){return c()},children:q=>(()=>{var k=Ra(),J=k.firstChild;return k.$$click=()=>M(q),ye(J,()=>q.username),ye(k,K(Ki,{get catLink(){return q.CatUrl}}),null),mt(()=>Dn(k,"id",q.id)),k})()}),null),T})(),(()=>{var T=Da(),V=T.firstChild,R=V.firstChild,S=R.firstChild,F=S.firstChild;F.firstChild;var q=S.nextSibling,k=q.nextSibling,J=k.firstChild,re=J.nextSibling;return ye(F,(()=>{var Y=Ze(()=>s()!=null);return()=>Y()?`${s()?.username}`:""})(),null),ye(k,K(Ee,{get when(){return a()},get children(){return $a()}}),J),re.$$click=()=>{let Y=new Ea(i(),s(),"promptForGame");$(Y),a()==!1&&u(!0)},T})()]}Ut(["click"]);const ni="b",si="k",Ln="n",Po="p",oi="q",ri=new Audio(Rn);class C{x;y;state=!0;magnitude=0;constructor(i,t){this.x=i,this.y=t}}class y{start;end;boardStartIndex;boardEndIndex;constructor(i,t,n,r){if(n&&(this.start=n),r&&(this.end=r),n&&r){this.boardStartIndex=this.convertToBoardIndex(n),this.boardEndIndex=this.convertToBoardIndex(r);return}i&&t?(this.boardStartIndex=i.x+i.y*8,this.boardEndIndex=t.x+t.y*8,this.start=this.convertToBoardPosition(this.boardStartIndex),this.end=this.convertToBoardPosition(this.boardEndIndex)):(this.start="a8",this.end="a8",this.boardStartIndex=0,this.boardEndIndex=0)}toString(){return this.start+"-"+this.end}convertToBoardIndex(i){if(i.length!=2)throw new Error("Invalid position");let t=i[0],n=i[1],r=t.charCodeAt(0)-97,s=8-parseInt(n);return r+s*8}convertToBoardPosition(i){if(i<0||i>63)throw new Error("Invalid index: "+i);let t=i%8,n=Math.floor(i/8),r=String.fromCharCode(t+97),s=8-n;return r+s}testConverToBoardIndex(){let i=[];i.push(this.convertToBoardIndex("a8")==0),i.push(this.convertToBoardIndex("b8")==1),i.push(this.convertToBoardIndex("c8")==2),i.push(this.convertToBoardIndex("d8")==3),i.push(this.convertToBoardIndex("e8")==4),i.push(this.convertToBoardIndex("f8")==5),i.push(this.convertToBoardIndex("g8")==6),i.push(this.convertToBoardIndex("h8")==7),i.push(this.convertToBoardIndex("a7")==8),i.push(this.convertToBoardIndex("b7")==9),i.push(this.convertToBoardIndex("c7")==10),i.push(this.convertToBoardIndex("d7")==11),i.push(this.convertToBoardIndex("e7")==12),i.push(this.convertToBoardIndex("f7")==13),i.push(this.convertToBoardIndex("g7")==14),i.push(this.convertToBoardIndex("h7")==15),i.push(this.convertToBoardIndex("a6")==16);for(let t=0;t<i.length;t++)if(!i[t])throw new Error("Convert to board Index failed failed")}runAllTests(){this.testConverToBoardIndex(),console.log("All tests ran for move class")}}class Ye{position;pos;boardIndex;constructor(i,t){i?(this.position=i,this.boardIndex=this.convertToBoardIndex(i),this.pos=new C(this.convertToBoardIndex(i)%8,Math.floor(this.convertToBoardIndex(i)/8))):t?(this.boardIndex=t,this.position=this.convertToBoardPosition(t),this.pos=new C(t%8,Math.floor(t/8))):(this.position="a8",this.boardIndex=0,this.pos=new C(0,0))}moveTo(i){this.position=i,this.boardIndex=this.convertToBoardIndex(i),this.pos=new C(this.boardIndex%8,Math.floor(this.boardIndex/8))}getPosition(){return this.position}getIndex(){return this.boardIndex}convertToBoardIndex(i){if(i.length!=2)throw new Error("Invalid position");let t=i[0],n=i[1],r=t.charCodeAt(0)-97,s=8-parseInt(n);return r+s*8}testConvertToBoardIndex(){let i=[];i.push(this.convertToBoardIndex("a8")==0),i.push(this.convertToBoardIndex("b8")==1),i.push(this.convertToBoardIndex("c8")==2),i.push(this.convertToBoardIndex("d8")==3),i.push(this.convertToBoardIndex("e8")==4),i.push(this.convertToBoardIndex("f8")==5),i.push(this.convertToBoardIndex("g8")==6),i.push(this.convertToBoardIndex("h8")==7),i.push(this.convertToBoardIndex("a7")==8),i.push(this.convertToBoardIndex("b7")==9),i.push(this.convertToBoardIndex("c7")==10),i.push(this.convertToBoardIndex("d7")==11),i.push(this.convertToBoardIndex("e7")==12),i.push(this.convertToBoardIndex("f7")==13),i.push(this.convertToBoardIndex("g7")==14),i.push(this.convertToBoardIndex("h7")==15),i.push(this.convertToBoardIndex("a6")==16);for(let t=0;t<i.length;t++)if(!i[t])throw new Error("Convert to board Index failed failed")}convertToBoardPosition(i){let t=i%8,n=Math.floor(i/8),r=String.fromCharCode(t+97),s=8-n;return r+s}testConvertToPosition(){let i=[];i.push(this.convertToBoardPosition(0)=="a8"),i.push(this.convertToBoardPosition(0)=="a8"),i.push(this.convertToBoardPosition(0)=="a8"),i.push(this.convertToBoardPosition(1)=="b8"),i.push(this.convertToBoardPosition(2)=="c8"),i.push(this.convertToBoardPosition(3)=="d8"),i.push(this.convertToBoardPosition(4)=="e8"),i.push(this.convertToBoardPosition(5)=="f8"),i.push(this.convertToBoardPosition(6)=="g8"),i.push(this.convertToBoardPosition(7)=="h8"),i.push(this.convertToBoardPosition(8)=="a7"),i.push(this.convertToBoardPosition(9)=="b7"),i.push(this.convertToBoardPosition(10)=="c7"),i.push(this.convertToBoardPosition(11)=="d7"),i.push(this.convertToBoardPosition(12)=="e7"),i.push(this.convertToBoardPosition(13)=="f7"),i.push(this.convertToBoardPosition(14)=="g7"),i.push(this.convertToBoardPosition(15)=="h7"),i.push(this.convertToBoardPosition(16)=="a6");for(let t=0;t<i.length;t++)if(!i[t])throw new Error("Convert to position failed")}runAllTests(){this.testConvertToBoardIndex(),this.testConvertToPosition(),console.log("All tests ran for position class")}}class be{position;color;type;noDrag=!1;UIComponent=null;appended=!0;constructor(i,t,n){this.position=new Ye(i),this.color=t,this.type=n}removeUIComponent(){this.UIComponent.remove(),this.appended=!1}syncUIClass(){this.UIComponent&&(this.UIComponent.classList=[],this.UIComponent.classList.add("piece"),this.UIComponent.classList.add(this.color==="white"?this.type.toUpperCase():this.type.toLowerCase()),this.noDrag&&this.UIComponent.classList.add("noDrag"))}syncUIPosition(){let i=document.getElementById(this.position.getPosition());i&&i.appendChild(this.UIComponent)}move(i){this.position.moveTo(i)}getPosition(){return this.position.getPosition()}getIndex(){return this.position.getIndex()}getPos(){return this.position}convertToBoardIndex(i){if(i.length!=2)throw new Error("Invalid position");let t=i[0],n=i[1],r=t.charCodeAt(0)-97,s=8-parseInt(n);return r+s*8}testConverToBoardIndex(){let i=[];i.push(this.convertToBoardIndex("a8")==0),i.push(this.convertToBoardIndex("b8")==1),i.push(this.convertToBoardIndex("c8")==2),i.push(this.convertToBoardIndex("d8")==3),i.push(this.convertToBoardIndex("e8")==4),i.push(this.convertToBoardIndex("f8")==5),i.push(this.convertToBoardIndex("g8")==6),i.push(this.convertToBoardIndex("h8")==7),i.push(this.convertToBoardIndex("a7")==8),i.push(this.convertToBoardIndex("b7")==9),i.push(this.convertToBoardIndex("c7")==10),i.push(this.convertToBoardIndex("d7")==11),i.push(this.convertToBoardIndex("e7")==12),i.push(this.convertToBoardIndex("f7")==13),i.push(this.convertToBoardIndex("g7")==14),i.push(this.convertToBoardIndex("h7")==15),i.push(this.convertToBoardIndex("a6")==16);for(let t=0;t<i.length;t++)if(!i[t])throw new Error("Convert to board Index failed failed")}runAllTests(){this.testConverToBoardIndex(),console.log("All tests ran for piece class")}}class oe{Pieces;currentTurnColor="white";fen="";board=[];halfMoveClock=0;fullMoveNumber=1;castlingRights="KQkq";enPassantTargetSquare="-";legalMoves=[];inCheck=!1;checkMateSignal=j(!1);checkmate=this.checkMateSignal[0];setCheckmate=this.checkMateSignal[1];capturedPieces=[];premove=null;History=[];moveIndex=-1;inLastMove=!0;constructor(i,t){i||(i=["r","n","b","q","k","b","n","r","p","p","p","p","p","p","p","p"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","P","P","P","P","P","P","P","P","R","N","B","Q","K","B","N","R"]);const n=/^([rnbqkpRNBQKP1-8]+\/){7}([rnbqkpRNBQKP1-8]+)\s[bw]\s(-|K?Q?k?q?)\s(-|[a-h][36])\s(0|[1-9][0-9]*)\s([1-9][0-9]*)/;if(t!=null&&t.match(n)){let s=t.split(" ");i=this.fenToBoard(t),this.castlingRights=s[2],this.enPassantTargetSquare=s[3],s[1]==="w"?this.currentTurnColor="white":this.currentTurnColor="black",this.halfMoveClock=parseInt(s[4]),this.fullMoveNumber=parseInt(s[5])}else if(t!=null&&!t.match(n))throw new Error("Invalid fen: "+t);let r=[];for(let s=0;s<64;s++){if(i[s]!=" "&&i[s]!=null){let d=document.createElement("section");d.classList.add("piece"),d.classList.add(i[s]),d.id=this.generateRandomId(20);let a=document.createElement("div");d.appendChild(a),d.dataset.position=this.convertToPosition(s),r.push(d)}this.Pieces=[];for(let d=0;d<i.length;d++){let a=i[d];if(a!=" "){let u=a==a.toUpperCase()?"white":"black",m=a.toLowerCase(),v=this.convertToPosition(d),I=new be(v,u,m);this.Pieces.push(I)}}for(let d=0;d<this.Pieces.length;d++)this.Pieces[d].UIComponent=r[d]}this.UIPieces=r,this.board=i,t!=null?this.fen=t:this.fen=this.boardToFen()}getUIPieceByPosition(i){let t=document.getElementById(i);if(t){let n=t.querySelector(".piece");if(n)return n}}getPieceByPosition(i){for(let t=0;t<this.Pieces.length;t++)if(this.Pieces[t].getPosition()===i)return this.Pieces[t]}convertToPosition(i){let t=String.fromCharCode(97+i%8),n=8-Math.floor(i/8);return t+n}displayBoard(){let i="";for(let t=0;t<8;t++){for(let n=0;n<8;n++)i+=this.Piece(new C(n,t))===" "?" - ":" "+(this.Piece(new C(n,t)).color==="black"?this.Piece(new C(n,t)).type:this.Piece(new C(n,t)).type.toUpperCase())+" ";i!=null&&console.log(`${8-t}| `+i),i=""}console.log("    _  _  _  _  _  _  _  _"),console.log("    A  B  C  D  E  F  G  H")}fenToBoard(i){let t=[],s=i.split(" ")[0].split("/");for(let d=0;d<s.length;d++){let u=s[d].split("");for(let m=0;m<u.length;m++){let v=u[m];if(v.match(/[1-8]/))for(let I=0;I<parseInt(v);I++)t.push(" ");else t.push(v)}}return t.length===63&&t.push(" "),t}boardToFen(){let i="",t=0;for(let n=0;n<64;n++){let r=this.getPieceAtBoardIndex(n);r===""?(t++,(t===8||n%8===7)&&(i+=t,n!=63&&(i+="/"),t=0)):(t!==0&&(i+=t,t=0),i+=r.color==="white"?r.type.toUpperCase():r.type.toLowerCase(),r.getIndex()%8===7&&n!==63&&(i+="/",t=0))}return i+=" "+this.currentTurnColor[0]+" ",i+=this.castlingRights+" ",i+=this.enPassantTargetSquare+" ",i+=this.halfMoveClock+" ",i+=this.fullMoveNumber,i}getPieceAtBoardIndex(i){for(let t=0;t<this.Pieces.length;t++)if(this.Pieces[t].getIndex()===i)return this.Pieces[t];return""}async movePiece(i,t){let n=new y(void 0,void 0,i,t);n.boardEndIndex;let r=this.getPieceIndex(i),s=this.Pieces[r];if(s?.type===void 0)throw new Error("Invalid move");if(s.type!="p"?this.halfMoveClock++:this.halfMoveClock=0,this.enPassantTargetSquare!="-"&&s.type==="p"){let d=new Ye(i),a=new Ye(t);if(s.color==="white"&&d.pos.y===3&&a.position===t){let u=a.boardIndex+8,m=this.getPieceAtBoardIndex(u);this.board[u]=" ",this.Pieces.splice(this.Pieces.indexOf(m),1)}if(s.color==="black"&&d.pos.y===4&&a.position===t){let u=a.boardIndex-8,m=this.getPieceAtBoardIndex(u);this.board[u]=" ",this.Pieces.splice(this.Pieces.indexOf(m),1)}}if(s.type=="p"&&Math.abs(s.getIndex()-n.boardEndIndex)==16){let d="-";s.color==="white"?d=this.convertToPosition(n.boardEndIndex+8):d=this.convertToPosition(n.boardEndIndex-8),this.enPassantTargetSquare=d}else this.enPassantTargetSquare="-";if(s.type==="k"){if(s.color==="white"){let d=new Ye(i),a=new Ye(t);if(d.pos.x-a.pos.x===2&&this.castlingRights.includes("Q")){this.convertToPosition(d.boardIndex-4);let u=this.convertToPosition(d.boardIndex-1),m=this.getPieceAtBoardIndex(d.boardIndex-4);this.castlingRights=this.castlingRights.replace("KQ",""),m.color!=null&&m.move(u)}if(d.pos.x-a.pos.x===-2&&this.castlingRights.includes("K")){this.convertToPosition(d.boardIndex+3);let u=this.convertToPosition(d.boardIndex+1),m=this.getPieceAtBoardIndex(d.boardIndex+3);this.castlingRights=this.castlingRights.replace("KQ",""),m.color!=null&&m.move(u)}this.castlingRights=this.castlingRights.replace("KQ","")}else{let d=new Ye(i),a=new Ye(t);if(d.pos.x-a.pos.x===2&&this.castlingRights.includes("q")){this.convertToPosition(d.boardIndex-4);let u=this.convertToPosition(d.boardIndex-1),m=this.getPieceAtBoardIndex(d.boardIndex-4);this.castlingRights=this.castlingRights.replace("kq",""),m.color!=null&&m.move(u)}if(d.pos.x-a.pos.x===-2&&this.castlingRights.includes("k")){this.convertToPosition(d.boardIndex+3);let u=this.convertToPosition(d.boardIndex+1),m=this.getPieceAtBoardIndex(d.boardIndex+3);this.castlingRights=this.castlingRights.replace("kq",""),m.color!=null&&m.move(u)}this.castlingRights=this.castlingRights.replace("kq","")}this.castlingRights===""&&(this.castlingRights="-")}if(this.currentTurnColor==="black"&&this.fullMoveNumber++,s.type==="r"&&(s.color==="white"?s.getIndex()===0?this.castlingRights=this.castlingRights.replace("Q",""):s.getIndex()===7&&(this.castlingRights=this.castlingRights.replace("K","")):s.getIndex()===56?this.castlingRights=this.castlingRights.replace("q",""):s.getIndex()===63&&(this.castlingRights=this.castlingRights.replace("k",""))),this.getPieceIndex(t)!==-1){let d=this.getPieceIndex(t),a=this.Pieces[d];a.type==="r"&&(a.color==="white"?a.getIndex()===56?this.castlingRights=this.castlingRights.replace("Q",""):a.getIndex()===63&&(this.castlingRights=this.castlingRights.replace("K","")):a.getIndex()===0?this.castlingRights=this.castlingRights.replace("q",""):a.getIndex()===7&&(this.castlingRights=this.castlingRights.replace("k",""))),a.appended=!1,this.capturedPieces.push(a),this.Pieces.splice(d,1),this.halfMoveClock=0}s.move(t),this.currentTurnColor=this.currentTurnColor==="white"?"black":"white",this.fen=this.boardToFen(),this.board=this.fenToBoard(this.fen),this.inCheck=this.isInCheck(this)}async moveLegally(i,t,n){let r=this.findLegalMoves(this),s=this.isMoveCastling(i,t),d=this.isMoveEnPassant(i,t),a=this.getPieceAtPosition(t),u,m=this.getPieceAtPosition(i);if(await this.goForwardToLastMove(!0),this.enPassantTargetSquare!="-"){let x=new Ye(this.enPassantTargetSquare);d?this.currentTurnColor==="white"?u=this.getPieceAtPosition(this.convertToPosition(x.boardIndex+8)):u=this.getPieceAtPosition(this.convertToPosition(x.boardIndex-8)):u=""}let v=!1;for(let x=0;x<r.length;x++)r[x].start===i&&r[x].end===t&&(v=!0);if(!v){console.error("Illegal move"),m.color!=this.currentTurnColor&&(this.removePremoveIndicator(),this.premove&&(this.premove=null),this.preMove(i,t,n));return}if(this.getPieceAtPosition(i).type==="p"&&this.getPieceAtPosition(i).color==="white"&&t[1]==="8")if(n===void 0){console.error("Illegal move"),m.color!=this.currentTurnColor&&(this.removePremoveIndicator(),this.premove&&(this.premove=null),this.preMove(i,t,n));return}else{let x=this.getPieceAtPosition(i);x.type=n,x.syncUIClass(),this.movePiece(i,t);let b=new Di(i,t,this.fen);b.turnColor=this.currentTurnColor==="white"?"black":"white",b.crowning=!0,b.crownedTo=n,b.castle=s,a!=""&&(b.capturePiece=a.type,b.eating=!0,this.capturedPieces.push(a),a.appended=!1,a.removeUIComponent()),this.History.push(b),this.setLastMoveUIIndicator(b),this.moveIndex++,await ri.play();const M=new CustomEvent("move",{detail:{start:i,end:t,promotion:n}});document.dispatchEvent(M),this.premove&&(await this.moveLegally(this.premove.from,this.premove.to,this.premove.crownedTo),this.premove=null,this.removePremoveIndicator()),r=this.findLegalMoves(this),r.length===0&&this.setCheckmate(!0);return}else if(this.getPieceAtPosition(i).type==="p"&&this.getPieceAtPosition(i).color==="black"&&t[1]==="1")if(n===void 0){console.error("need to pass promotion string when moving pawn to end of board");return}else{let x=this.getPieceAtPosition(i);x.type=n,x.syncUIClass(),this.movePiece(i,t);let b=new Di(i,t,this.fen);b.turnColor=this.currentTurnColor==="white"?"black":"white",b.crowning=!0,b.crownedTo=n,b.castle=s,a!=""&&(b.capturePiece=a.type,b.eating=!0,a.appended=!1,this.capturedPieces.push(a),a.removeUIComponent()),this.History.push(b),this.setLastMoveUIIndicator(b),this.moveIndex++,await ri.play();const M=new CustomEvent("move",{detail:{start:i,end:t,promotion:n}});document.dispatchEvent(M),this.premove&&(await this.moveLegally(this.premove.from,this.premove.to,this.premove.crownedTo),this.premove=null,this.removePremoveIndicator()),r=this.findLegalMoves(this),r.length===0&&this.setCheckmate(!0);return}this.movePiece(i,t);let I=new Di(i,t,this.fen);I.turnColor=this.currentTurnColor==="white"?"black":"white",I.castle=s,a!=""&&(I.capturePiece=a.type,I.eating=!0,a.removeUIComponent()),d&&(I.enPassant=!0,I.enPassantSquare=u.getPosition(),u.removeUIComponent()),this.History.push(I),await xo(1);for(let x=0;x<this.Pieces.length;x++)this.Pieces[x].syncUIPosition();this.setLastMoveUIIndicator(I),await ri.play(),await ri.play();const U=new CustomEvent("move",{detail:{start:i,end:t,promotion:n}});document.dispatchEvent(U),await xo(10),this.Pieces.forEach(x=>x.syncUIClass()),this.Pieces.forEach(x=>x.syncUIPosition()),this.moveIndex++,this.premove&&(await this.moveLegally(this.premove.from,this.premove.to,this.premove.crownedTo),this.premove=null,this.removePremoveIndicator()),r=this.findLegalMoves(this),r.length===0&&this.setCheckmate(!0)}async preMove(i,t,n){let r=this.getPieceAtPosition(i);if(r===""){console.error("No piece at start position");return}if(r.color==this.currentTurnColor)return;let s=new oe(void 0,this.fen);s.currentTurnColor=s.currentTurnColor==="white"?"black":"white",console.log(s.currentTurnColor);let d=this.findPseudoLegalMoves(s);console.log(s),console.log(d);let a=!1;for(let u=0;u<d.length;u++)d[u].start===i&&d[u].end===t&&(a=!0);if(!a){console.error("Illegal move");return}i=i,this.premove=new Di(i,t,this.fen),this.premove.crownedTo=n,this.setPremoveIndicator(i,t)}async setPremoveIndicator(i,t){let n=document.getElementById(i),r=document.getElementById(t);n.classList.add("premove"),r.classList.add("premove")}async removePremoveIndicator(){let i=document.querySelectorAll(".chessSquare");for(let t=0;t<i.length;t++)i[t].classList.remove("premove")}setLastMoveUIIndicator(i){let t=document.querySelectorAll(".chessSquare");for(let u=0;u<t.length;u++)t[u].classList.remove("lastMove");if(i===void 0)return;let n=i,r=n.from,s=n.to,d=document.getElementById(r),a=document.getElementById(s);d.classList.add("lastMove"),a.classList.add("lastMove")}async getCapturedPieceFromElement(i){for(let t=0;t<this.capturedPieces.length;t++)if(this.capturedPieces[t].UIComponent.id===i.id)return console.log(this.capturedPieces[t].UIComponent.id,i.id),this.capturedPieces[t]}async goForwardOneMove(i=!1){console.log(this.History[this.moveIndex+1]),this.History.length!==0&&this.moveIndex!==this.History.length-1&&(await this.executeUIMove(this.History[this.moveIndex+1],i),this.moveIndex++,this.setLastMoveUIIndicator(this.History[this.moveIndex]))}async goForwardToLastMove(i=!0){for(let t=this.moveIndex;t<this.History.length-1;t++)await this.goForwardOneMove(i)}async executeUIMove(i,t=!1){if(i===void 0)return;let n=this.getUIPieceByPosition(i.from),r=this.getUIPieceByPosition(i.to),s=await this.getNormalizedVectorFromMove(i.from,i.to),d=document.getElementById(i.to);if(i.castle)switch(i.to){case"g1":let a=await this.getNormalizedVectorFromMove("h1","f1"),u=this.getUIPieceByPosition("h1");await this.moveUIPiece(a,u,t),document.getElementById("f1").appendChild(u),await this.setUIPositionToZero(u);break;case"c1":let v=await this.getNormalizedVectorFromMove("a1","d1"),I=this.getUIPieceByPosition("a1");await this.moveUIPiece(v,I,t),document.getElementById("d1").appendChild(I),await this.setUIPositionToZero(I);break;case"g8":let x=await this.getNormalizedVectorFromMove("h8","f8"),b=this.getUIPieceByPosition("h8");await this.moveUIPiece(x,b,t),document.getElementById("f8").appendChild(b),await this.setUIPositionToZero(b);break;case"c8":let $=await this.getNormalizedVectorFromMove("a8","d8"),T=this.getUIPieceByPosition("a8");await this.moveUIPiece($,T,t),document.getElementById("d8").appendChild(T),await this.setUIPositionToZero(T);break}i.capturePiece&&(await this.getCapturedPieceFromElement(r))?.removeUIComponent(),i.crowning&&(i.turnColor==="white"?(n?.classList.remove("P"),n?.classList.add(i.crownedTo.toUpperCase())):(n?.classList.remove("p"),n?.classList.add(i.crownedTo.toLowerCase()))),await this.moveUIPiece(s,n,t),d?.appendChild(n),await this.setUIPositionToZero(n),t||await ri.play()}async executeUIMoveReverse(i,t=!1){let n=this.getUIPieceByPosition(i.to),r=await this.getNormalizedVectorFromMove(i.to,i.from),s=document.getElementById(i.from),d=document.getElementById(i.to);if(i.castle)switch(i.to){case"g1":let a=await this.getNormalizedVectorFromMove("f1","h1"),u=this.getUIPieceByPosition("f1");await this.moveUIPiece(a,u,t),document.getElementById("h1").appendChild(u),await this.setUIPositionToZero(u);break;case"c1":let v=await this.getNormalizedVectorFromMove("d1","a1"),I=this.getUIPieceByPosition("d1");await this.moveUIPiece(v,I,t),document.getElementById("a1").appendChild(I),await this.setUIPositionToZero(I);break;case"g8":let x=await this.getNormalizedVectorFromMove("f8","h8"),b=this.getUIPieceByPosition("f8");await this.moveUIPiece(x,b,t),document.getElementById("h8").appendChild(b),await this.setUIPositionToZero(b);break;case"c8":let $=await this.getNormalizedVectorFromMove("d8","a8"),T=this.getUIPieceByPosition("d8");await this.moveUIPiece($,T,t),document.getElementById("a8").appendChild(T),await this.setUIPositionToZero(T);break}if(i.capturePiece){console.log("need to add piece back");for(let a=0;a<this.capturedPieces.length;a++)if(this.capturedPieces[a].type===i.capturePiece&&this.capturedPieces[a].color!=i.turnColor&&this.capturedPieces[a].appended===!1){let u=this.capturedPieces[a];d?.appendChild(u.UIComponent),u.appended=!0;break}}i.crowning&&(i.turnColor==="white"?(n?.classList.remove(i.crownedTo.toUpperCase()),n?.classList.add("P")):(n?.classList.remove(i.crownedTo.toLowerCase()),n?.classList.add("p"))),await this.moveUIPiece(r,n,t),s?.appendChild(n),await this.setUIPositionToZero(n),t||await ri.play()}async setUIPositionToZero(i){i.style.transform="translate(0.1px, 0.1px)"}async moveUIPiece(i,t,n=!1){for(let r=0;r<i.magnitude;r++)t.style.transform=`translate(${i.x*r}px, ${i.y*r}px)`,r%15===0&&!n&&await this.sleep(1)}async sleep(i){return new Promise(t=>setTimeout(t,i))}async getNormalizedVectorFromMove(i,t){let n=document.getElementById(i),r=document.getElementById(t),s=n.getBoundingClientRect(),d={x:s?.x+s?.width/2,y:s?.y+s?.height/2},a=r?.getBoundingClientRect(),u={x:a?.x+a?.width/2,y:a?.y+a?.height/2},m={x:u.x-d.x,y:u.y-d.y},v=Math.sqrt(m.x**2+m.y**2),I={x:m.x/v,y:m.y/v},U=new C(I.x,I.y);return U.magnitude=v,U}isMoveCastling(i,t){let n=new Ye(i),r=new Ye(t);return this.getPieceAtPosition(i).type==="k"&&Math.abs(n.pos.x-r.pos.x)===2}isMoveEnPassant(i,t){let n=new Ye(i),r=new Ye(t);return this.getPieceAtPosition(i).type==="p"&&Math.abs(n.pos.x-r.pos.x)===1&&this.getPieceAtPosition(t)===""}getPieceIndex(i){let t=-1;for(let n=0;n<this.Pieces.length;n++)if(this.Pieces[n].getPosition()==i){t=n;break}return t}getPieceAtPosition(i){let t="";for(let n=0;n<this.Pieces.length;n++){let r=this.Pieces[n];if(r.getPosition()==i)return r}return t}testConvertToPosition(){let i=[];i.push(this.convertToPosition(0)=="a8"),i.push(this.convertToPosition(1)=="b8"),i.push(this.convertToPosition(2)=="c8"),i.push(this.convertToPosition(3)=="d8"),i.push(this.convertToPosition(4)=="e8"),i.push(this.convertToPosition(5)=="f8"),i.push(this.convertToPosition(6)=="g8"),i.push(this.convertToPosition(7)=="h8"),i.push(this.convertToPosition(8)=="a7"),i.push(this.convertToPosition(9)=="b7"),i.push(this.convertToPosition(10)=="c7"),i.push(this.convertToPosition(11)=="d7"),i.push(this.convertToPosition(12)=="e7"),i.push(this.convertToPosition(13)=="f7"),i.push(this.convertToPosition(14)=="g7"),i.push(this.convertToPosition(15)=="h7"),i.push(this.convertToPosition(16)=="a6");for(let t=0;t<i.length;t++)if(!i[t])throw new Error("Convert to position failed")}testFenToBoard(){let i=[];i.push(this.fenToBoard("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1")),i.push(this.fenToBoard("rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1"));for(let n=0;n<i.length;n++)if(!i[n])throw new Error("Fen to board failed");t(i[0],["r","n","b","q","k","b","n","r","p","p","p","p","p","p","p","p"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","P","P","P","P","P","P","P","P","R","N","B","Q","K","B","N","R"]),t(i[1],["r","n","b","q","k","b","n","r","p","p","p","p","p","p","p","p"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","P"," "," "," "," "," "," "," "," "," "," "," ","P","P","P","P"," ","P","P","P","R","N","B","Q","K","B","N","R"]);function t(n,r){if(n===r)return!0;if(n==null||r==null)throw console.log(n,r),new Error("Fen to board failed");if(n.length!==r.length)throw console.log(n,r),new Error("Fen to board failed");for(var s=0;s<n.length;++s)if(n[s]!==r[s])throw console.log(n,r),new Error("Fen to board failed");return!0}}generateRandomId(i){let t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<i;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}testBoardToFen(){let i=[],t=new oe;i.push(t.boardToFen()=="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"),t.movePiece("e2","e4"),i.push(t.boardToFen()=="rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1");for(let n=0;n<i.length;n++)if(!i[n])throw new Error("Board to fen failed, test "+(n+1)+" failed"+t.boardToFen())}testConstructors(){let i=new oe,t=[];t.push(i.Pieces[0]?.getPosition()=="a8"),t.push(i.Pieces[0].color=="black"),t.push(i.Pieces[0].type=="r"),t.push(i.Pieces[1]?.getPosition()=="b8"),t.push(i.Pieces[1].color=="black"),t.push(i.Pieces[1].type=="n"),t.push(i.Pieces[2]?.getPosition()=="c8"),t.push(i.Pieces[2].color=="black"),t.push(i.Pieces[2].type=="b"),t.push(i.Pieces[3]?.getPosition()=="d8");for(let s=0;s<t.length;s++)if(!t[s])throw new Error("Board constructor 1 failed "+s);let n=new oe([],"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1");t=[],t.push(n.Pieces[0]?.getPosition()=="a8"),t.push(n.Pieces[0].color=="black"),t.push(n.Pieces[0].type=="r"),t.push(n.Pieces[1]?.getPosition()=="b8"),t.push(n.Pieces[1].color=="black"),t.push(n.Pieces[1].type=="n"),t.push(n.Pieces[2]?.getPosition()=="c8"),t.push(n.Pieces[2].color=="black"),t.push(n.Pieces[2].type=="b"),t.push(n.Pieces[3]?.getPosition()=="d8");for(let s=0;s<t.length;s++)if(!t[s])throw new Error("Board constructor 2 failed"+s);let r=new oe([],"rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1");t=[],t.push(r.Pieces[0]?.getPosition()=="a8"),t.push(r.Pieces[0].color=="black"),t.push(r.Pieces[0].type=="r"),t.push(r.currentTurnColor=="black");for(let s=0;s<t.length;s++)if(!t[s])throw new Error("Board constructor 3 failed"+s)}findPseudoLegalMoves(i){let t=[];for(let n=0;n<i.Pieces.length;n++){let r=i.Pieces[n];if(i.currentTurnColor===r.color)switch(r.type){case"p":t.push(...this.findPawnMoves(r,i));break;case"r":t.push(...this.findRookMoves(r,i));break;case"n":t.push(...this.findKnightMoves(r,i));break;case"b":t.push(...this.findBishopMoves(r,i));break;case"q":t.push(...this.findQueenMoves(r,i));break;case"k":t.push(...this.findKingMoves(r,i));break}}return t}testFindPseudoLegalMoves(){let i=new oe,t=this.findPseudoLegalMoves(i),n=[];n.push(t.length==20);for(let r=0;r<n.length;r++)if(!n[r])throw new Error("Find legal moves failed, test "+(r+1)+" failed");i=new oe([],"rnbqkbnr/1ppp1ppp/8/p3pP2/4P3/8/PPPP2PP/RNBQKBNR w KQkq e6 0 4"),t=this.findPseudoLegalMoves(i),n=[],n.push(t.length==30);for(let r=0;r<n.length;r++)if(!n[r])throw new Error("Find legal moves failed, test "+(r+1)+" failed")}findLegalMoves(i){let t=i.findPseudoLegalMoves(i),n=[];for(let r=0;r<t.length;r++){let s=new oe([],i.boardToFen());s.movePiece(t[r].start,t[r].end),s.currentTurnColor=s.currentTurnColor==="white"?"black":"white",this.isInCheck(s)||n.push(t[r])}return i.legalMoves=n,n}testFindLegalMoves(){let i=new oe,t=this.findLegalMoves(i),n=[];n.push(t.length==20),i=new oe([],"rnb1k1nr/pppp1ppp/8/2b1p3/P3q3/8/1PPP1PPP/RNBQKB1R w KQkq - 0 6"),t=this.findLegalMoves(i),n.push(t.length==2),i=new oe([],"rnbqkbnr/1ppp1ppp/8/p3Q3/4P3/8/PPPP1PPP/RNB1KBNR b KQkq - 0 3"),t=this.findLegalMoves(i),n.push(t.length==3),i=new oe([],"rnbqkbnr/p1p1pppp/1p6/3pP3/8/8/PPPP1PPP/RNBQKBNR w KQkq d6 0 3"),t=this.findLegalMoves(i),n.push(t.length==31);for(let r=0;r<n.length;r++)if(!n[r])throw new Error("Find legal moves failed, test "+(r+1)+" failed")}isInCheck(i){let t=new oe([],i.boardToFen()),n=!0;for(let d=0;d<t.board.length;d++)t.board[d]!="-"&&(n=!1);n&&(console.log("empty board"),console.log(i.boardToFen())),t.currentTurnColor=t.currentTurnColor=="white"?"black":"white";let r=t.findPseudoLegalMoves(t),s;for(let d=0;d<i.Pieces.length;d++)i.Pieces[d].type=="k"&&i.Pieces[d].color==i.currentTurnColor&&(s=i.Pieces[d].getIndex());r.length==0&&(console.log("main board"),i.displayBoard(),console.log(i.fen),console.log("thingy"),t.displayBoard(),console.log(t.fen));for(let d=0;d<r.length;d++)if(r[d].boardEndIndex==s)return!0;return!1}testIsInCheck(){let i=new oe,t=[];t.push(!this.isInCheck(i));for(let n=0;n<t.length;n++)if(!t[n])throw new Error("Is in check failed, test "+(n+1)+" failed")}Piece(i){let t=i.x+i.y*8;for(let n=0;n<this.Pieces.length;n++)if(this.Pieces[n].getIndex()==t)return this.Pieces[n];return" "}addPiece(i){this.Pieces.push(i),this.board[i.getIndex()]!=null&&this.board[i.getIndex()]!=" "&&console.log("ERROR: PIECE ALREADY EXISTS AT THIS LOCATION",i),this.board[i.getIndex()]=i.type}findPawnMoves(i,t){let n=[],r=i.getIndex(),s=new C(r%8,Math.floor(r/8)),d=i.color;if(d!=t.currentTurnColor)return n;if(d=="white"){let a=new C(s.x,s.y-1);t.Piece(a)==" "&&s.y!=0&&n.push(new y(s,a));let u=new C(s.x,s.y-2);t.Piece(u)==" "&&t.Piece(a)==" "&&s.y==6&&n.push(new y(s,u));let m=new C(s.x-1,s.y-1);t.Piece(m)!=" "&&t.Piece(m)?.color=="black"&&s.x-1>=0&&s.y-1>=0&&n.push(new y(s,m));let v=new C(s.x+1,s.y-1);if(t.Piece(v)!=" "&&t.Piece(v)?.color=="black"&&s.x+1<=7&&s.y-1>=0&&n.push(new y(s,v)),t.enPassantTargetSquare!="-"&&s.y==3){let I=new C(t.enPassantTargetSquare.charCodeAt(0)-97,8-parseInt(t.enPassantTargetSquare[1]));gi(I,v)===!0&&n.push(new y(s,v)),gi(I,m)===!0&&n.push(new y(s,m))}}else{let a=new C(s.x,s.y+1);t.Piece(a)==" "&&s.y!=7&&n.push(new y(s,a));let u=new C(s.x,s.y+2);t.Piece(u)==" "&&t.Piece(a)==" "&&s.y==1&&n.push(new y(s,u));let m=new C(s.x-1,s.y+1);t.Piece(m)!=" "&&t.Piece(m)?.color=="white"&&s.x-1>=0&&s.y+1<=7&&n.push(new y(s,m));let v=new C(s.x+1,s.y+1);if(t.Piece(v)!=" "&&t.Piece(v)?.color=="white"&&s.x+1<=7&&s.y+1<=7&&n.push(new y(s,v)),t.enPassantTargetSquare!="-"&&s.y===4){let I=new C(t.enPassantTargetSquare.charCodeAt(0)-97,8-parseInt(t.enPassantTargetSquare[1]));gi(I,v)===!0&&n.push(new y(s,v)),gi(I,m)===!0&&n.push(new y(s,m))}}return n}testFindPawnMoves(){let i=new oe,t=this.findPawnMoves(i.Piece(new C(0,6)),i),n=[];n.push(t.length==2),n.push(t[0].toString()=="a2-a3"),n.push(t[1].toString()=="a2-a4");for(let s=0;s<n.length;s++)if(n[s]==!1){console.log("testFindPawnMoves failed");return}n=[],t=this.findPawnMoves(i.Pieces[16],i),n.push(t.length==2),n.push(t[0].toString()=="a2-a3"),n.push(t[1].toString()=="a2-a4");for(let s=0;s<n.length;s++)if(n[s]==!1){console.log("testFindPawnMoves failed");return}i=new oe([]);let r=new be("a5","black",Po);i.addPiece(r),r=new be("a4","white",Po),i.addPiece(r),t=this.findPawnMoves(r,i),n=[],n.push(t.length==0);for(let s=0;s<n.length;s++)if(n[s]==!1){console.error("testFindPawnMoves failed");return}}findRookMoves(i,t){let n=[],r=i.getIndex(),s=new C(r%8,Math.floor(r/8)),d=i.color;if(d!=t.currentTurnColor)return n;if(d==="white"){for(let a=s.y-1;a>=0;a--){let u=new C(s.x,a);if(t.Piece(u)===" ")n.push(new y(s,u));else if(t.Piece(u)?.color==="black"){n.push(new y(s,u));break}else break}for(let a=s.y+1;a<=7;a++){let u=new C(s.x,a);if(t.Piece(u)===" ")n.push(new y(s,u));else if(t.Piece(u)?.color==="black"){n.push(new y(s,u));break}else break}for(let a=s.x-1;a>=0;a--){let u=new C(a,s.y);if(t.Piece(u)===" ")n.push(new y(s,u));else if(t.Piece(u)?.color==="black"){n.push(new y(s,u));break}else break}for(let a=s.x+1;a<=7;a++){let u=new C(a,s.y);if(t.Piece(u)===" ")n.push(new y(s,u));else if(t.Piece(u)?.color==="black"){n.push(new y(s,u));break}else break}}else{for(let a=s.y-1;a>=0;a--){let u=new C(s.x,a);if(t.Piece(u)===" ")n.push(new y(s,u));else if(t.Piece(u)?.color==="white"){n.push(new y(s,u));break}else break}for(let a=s.y+1;a<=7;a++){let u=new C(s.x,a);if(t.Piece(u)===" ")n.push(new y(s,u));else if(t.Piece(u)?.color==="white"){n.push(new y(s,u));break}else break}for(let a=s.x-1;a>=0;a--){let u=new C(a,s.y);if(t.Piece(u)===" ")n.push(new y(s,u));else if(t.Piece(u)?.color==="white"){n.push(new y(s,u));break}else break}for(let a=s.x+1;a<=7;a++){let u=new C(a,s.y);if(t.Piece(u)===" ")n.push(new y(s,u));else if(t.Piece(u)?.color==="white"){n.push(new y(s,u));break}else break}}return n}testFindRookMoves(){let i=new oe([],"rnbqkbnr/1ppppppp/8/p7/P7/8/1PPPPPPP/RNBQKBNR w KQkq a6 0 2"),t=i.findRookMoves(i.Piece(new C(0,7)),i),n=[];n.push(t.length===2);for(let r=0;r<n.length;r++)if(n[r]==!1){console.log("testFindRookMoves failed");return}}findKnightMoves(i,t){let n=[],r=i.getIndex(),s=new C(r%8,Math.floor(r/8)),d=i.color;if(d!=t.currentTurnColor)return n;if(d==="white"){if(s.x-2>=0&&s.y-1>=0){let a=new C(s.x-2,s.y-1);t.Piece(a)===" "?n.push(new y(s,a)):t.Piece(a)?.color==="black"&&n.push(new y(s,a))}if(s.x+2<=7&&s.y-1>=0){let a=new C(s.x+2,s.y-1);t.Piece(a)===" "?n.push(new y(s,a)):t.Piece(a)?.color==="black"&&n.push(new y(s,a))}if(s.x-2>=0&&s.y+1<=7){let a=new C(s.x-2,s.y+1);t.Piece(a)===" "?n.push(new y(s,a)):t.Piece(a)?.color==="black"&&n.push(new y(s,a))}if(s.x+2<=7&&s.y+1<=7){let a=new C(s.x+2,s.y+1);t.Piece(a)===" "?n.push(new y(s,a)):t.Piece(a)?.color==="black"&&n.push(new y(s,a))}if(s.x-1>=0&&s.y-2>=0){let a=new C(s.x-1,s.y-2);t.Piece(a)===" "?n.push(new y(s,a)):t.Piece(a)?.color==="black"&&n.push(new y(s,a))}if(s.x-1>=0&&s.y+2<=7){let a=new C(s.x-1,s.y+2);t.Piece(a)===" "?n.push(new y(s,a)):t.Piece(a)?.color==="black"&&n.push(new y(s,a))}if(s.x+1<=7&&s.y-2>=0){let a=new C(s.x+1,s.y-2);t.Piece(a)===" "?n.push(new y(s,a)):t.Piece(a)?.color==="black"&&n.push(new y(s,a))}if(s.x+1<=7&&s.y+2<=7){let a=new C(s.x+1,s.y+2);t.Piece(a)===" "?n.push(new y(s,a)):t.Piece(a)?.color==="black"&&n.push(new y(s,a))}}else{if(s.x-2>=0&&s.y-1>=0){let a=new C(s.x-2,s.y-1);t.Piece(a)===" "?n.push(new y(s,a)):t.Piece(a)?.color==="white"&&n.push(new y(s,a))}if(s.x+2<=7&&s.y-1>=0){let a=new C(s.x+2,s.y-1);t.Piece(a)===" "?n.push(new y(s,a)):t.Piece(a)?.color==="white"&&n.push(new y(s,a))}if(s.x-2>=0&&s.y+1<=7){let a=new C(s.x-2,s.y+1);t.Piece(a)===" "?n.push(new y(s,a)):t.Piece(a)?.color==="white"&&n.push(new y(s,a))}if(s.x+2<=7&&s.y+1<=7){let a=new C(s.x+2,s.y+1);t.Piece(a)===" "?n.push(new y(s,a)):t.Piece(a)?.color==="white"&&n.push(new y(s,a))}if(s.x-1>=0&&s.y-2>=0){let a=new C(s.x-1,s.y-2);t.Piece(a)===" "?n.push(new y(s,a)):t.Piece(a)?.color==="white"&&n.push(new y(s,a))}if(s.x-1>=0&&s.y+2<=7){let a=new C(s.x-1,s.y+2);t.Piece(a)===" "?n.push(new y(s,a)):t.Piece(a)?.color==="white"&&n.push(new y(s,a))}if(s.x+1<=7&&s.y-2>=0){let a=new C(s.x+1,s.y-2);t.Piece(a)===" "?n.push(new y(s,a)):t.Piece(a)?.color==="white"&&n.push(new y(s,a))}if(s.x+1<=7&&s.y+2<=7){let a=new C(s.x+1,s.y+2);t.Piece(a)===" "?n.push(new y(s,a)):t.Piece(a)?.color==="white"&&n.push(new y(s,a))}}return n}testFindKnightMoves(){let i=new oe([]),t=[];i.currentTurnColor="white";let n=new be("c3","white",Ln);i.addPiece(n);let r=i.findKnightMoves(n,i);t.push(r.length===8),i=new oe([]),n=new be("c3","black",Ln),i.addPiece(n),i.currentTurnColor="black",r=i.findKnightMoves(n,i),t.push(r.length===8),i=new oe([]),n=new be("a1","white",Ln),i.addPiece(n),r=i.findKnightMoves(n,i),t.push(r.length===2);for(let s=0;s<t.length;s++)if(!t[s]){console.log("testFindKnightMoves failed at test "+s);return}}findBishopMoves(i,t){let n=[],r=i.getIndex(),s=new C(r%8,Math.floor(r/8)),d=i.color;if(d!=t.currentTurnColor)return n;if(d==="white"){for(let a=1;a<=7&&!(s.x-a<0||s.y-a<0);a++){let u=new C(s.x-a,s.y-a);if(t.Piece(u)===" ")n.push(new y(s,u));else if(t.Piece(u)?.color==="black"){n.push(new y(s,u));break}else break}for(let a=1;a<=7&&!(s.x+a>7||s.y-a<0);a++){let u=new C(s.x+a,s.y-a);if(t.Piece(u)===" ")n.push(new y(s,u));else if(t.Piece(u)?.color==="black"){n.push(new y(s,u));break}else break}for(let a=1;a<=7&&!(s.x-a<0||s.y+a>7);a++){let u=new C(s.x-a,s.y+a);if(t.Piece(u)===" ")n.push(new y(s,u));else if(t.Piece(u)?.color==="black"){n.push(new y(s,u));break}else break}for(let a=1;a<=7&&!(s.x+a>7||s.y+a>7);a++){let u=new C(s.x+a,s.y+a);if(t.Piece(u)===" ")n.push(new y(s,u));else if(t.Piece(u)?.color==="black"){n.push(new y(s,u));break}else break}}else{for(let a=1;a<=7&&!(s.x-a<0||s.y+a>7);a++){let u=new C(s.x-a,s.y+a);if(t.Piece(u)===" ")n.push(new y(s,u));else if(t.Piece(u)?.color==="white"){n.push(new y(s,u));break}else break}for(let a=1;a<=7&&!(s.x+a>7||s.y+a>7);a++){let u=new C(s.x+a,s.y+a);if(t.Piece(u)===" ")n.push(new y(s,u));else if(t.Piece(u)?.color==="white"){n.push(new y(s,u));break}else break}for(let a=1;a<=7&&!(s.x-a<0||s.y-a<0);a++){let u=new C(s.x-a,s.y-a);if(t.Piece(u)===" ")n.push(new y(s,u));else if(t.Piece(u)?.color==="white"){n.push(new y(s,u));break}else break}for(let a=1;a<=7&&!(s.x+a>7||s.y-a<0);a++){let u=new C(s.x+a,s.y-a);if(t.Piece(u)===" ")n.push(new y(s,u));else if(t.Piece(u)?.color==="white"){n.push(new y(s,u));break}else break}}return n}testFindBishopMoves(){let i=new oe([]),t=new be("a2","white",ni);i.addPiece(t);let n=i.findBishopMoves(t,i);if(n.length!==7){console.log("testFindBishopMoves failed 0");return}if(i=new oe([]),t=new be("a2","black",ni),i.addPiece(t),i.currentTurnColor="black",n=i.findBishopMoves(t,i),n.length!==7){console.log("testFindBishopMoves failed 1");return}if(i=new oe([]),t=new be("a2","white",ni),i.addPiece(t),i.currentTurnColor="black",t=new be("b3","black",ni),i.addPiece(t),n=i.findBishopMoves(t,i),n.length!==9){console.log("testFindBishopMoves failed 2");return}if(i=new oe([]),t=new be("a2","black",ni),i.addPiece(t),t=new be("b3","white",ni),i.addPiece(t),n=i.findBishopMoves(t,i),n.length!==9){console.log("testFindBishopMoves failed 3");return}}findQueenMoves(i,t){let n=this.findRookMoves(i,t);return n.push(...this.findBishopMoves(i,t)),n}testFindQueenMoves(){let i=new oe([]),t=new be("a2","white",oi);i.addPiece(t);let n=i.findQueenMoves(t,i);if(n.length!==21){console.log(n),console.error("testFindQueenMoves failed 0");return}if(i=new oe([]),t=new be("a2","black",oi),i.addPiece(t),i.currentTurnColor="black",n=i.findQueenMoves(t,i),n.length!==21){i.displayBoard(),console.log(n),console.error("testFindQueenMoves failed 1");return}if(i=new oe([]),t=new be("a2","white",oi),i.addPiece(t),i.currentTurnColor="black",t=new be("b3","black",oi),i.addPiece(t),n=i.findQueenMoves(t,i),n.length!==23){console.error("testFindQueenMoves failed 2");return}if(i=new oe([]),t=new be("a2","black",oi),i.addPiece(t),t=new be("b3","white",oi),i.addPiece(t),n=i.findQueenMoves(t,i),n.length!==23){console.error("testFindQueenMoves failed 3");return}}findKingMoves(i,t){let n=[],r=i.getPos().pos;if(i.color==="black"){let s=new C(r.x,r.y+1);t.Piece(s)===" "&&r.y+1<=7?n.push(new y(r,s)):t.Piece(s)?.color==="white"&&r.y+1<=7&&n.push(new y(r,s)),s=new C(r.x,r.y-1),t.Piece(s)===" "&&r.y-1>=0?n.push(new y(r,s)):t.Piece(s)?.color==="white"&&r.y-1>=0&&n.push(new y(r,s)),s=new C(r.x+1,r.y),t.Piece(s)===" "&&r.x+1<=7?n.push(new y(r,s)):t.Piece(s)?.color==="white"&&r.x+1<=7&&n.push(new y(r,s)),s=new C(r.x-1,r.y),t.Piece(s)===" "&&r.x-1>=0?n.push(new y(r,s)):t.Piece(s)?.color==="white"&&r.x-1>=0&&n.push(new y(r,s)),s=new C(r.x+1,r.y+1),t.Piece(s)===" "&&r.x+1<=7&&r.y+1<=7?n.push(new y(r,s)):t.Piece(s)?.color==="white"&&r.x+1<=7&&r.y+1<=7&&n.push(new y(r,s)),s=new C(r.x-1,r.y+1),t.Piece(s)===" "&&r.x-1>=0&&r.y+1<=7?n.push(new y(r,s)):t.Piece(s)?.color==="white"&&r.x-1>=0&&r.y+1<=7&&n.push(new y(r,s)),s=new C(r.x+1,r.y-1),t.Piece(s)===" "&&r.x+1<=7&&r.y-1>=0?n.push(new y(r,s)):t.Piece(s)?.color==="white"&&r.x+1<=7&&r.y-1>=0&&n.push(new y(r,s)),s=new C(r.x-1,r.y-1),t.Piece(s)===" "&&r.x-1>=0&&r.y-1>=0?n.push(new y(r,s)):t.Piece(s)?.color==="white"&&r.x-1>=0&&r.y-1>=0&&n.push(new y(r,s)),s=new C(r.x+2,r.y),t.Piece(s)===" "&&r.x+2===6&&r.y===0&&this.inCheck===!1&&t.Piece(new C(r.x+1,r.y))===" "&&t.castlingRights.includes("k")&&n.push(new y(r,s)),s=new C(r.x-2,r.y),t.Piece(s)===" "&&r.x-2===2&&r.y===0&&this.inCheck===!1&&t.Piece(new C(r.x-1,r.y))===" "&&t.Piece(s)===" "&&t.castlingRights.includes("q")&&n.push(new y(r,s))}else{let s=new C(r.x,r.y+1);t.Piece(s)===" "&&r.y+1<=7?n.push(new y(r,s)):t.Piece(s)?.color==="black"&&r.y+1<=7&&n.push(new y(r,s)),s=new C(r.x,r.y-1),t.Piece(s)===" "&&r.y-1>=0?n.push(new y(r,s)):t.Piece(s)?.color==="black"&&r.y-1>=0&&n.push(new y(r,s)),s=new C(r.x+1,r.y),t.Piece(s)===" "&&r.x+1<=7?n.push(new y(r,s)):t.Piece(s)?.color==="black"&&r.x+1<=7&&n.push(new y(r,s)),s=new C(r.x-1,r.y),t.Piece(s)===" "&&r.x-1>=0?n.push(new y(r,s)):t.Piece(s)?.color==="black"&&r.x-1>=0&&n.push(new y(r,s)),s=new C(r.x+1,r.y+1),t.Piece(s)===" "&&r.x+1<=7&&r.y+1<=7?n.push(new y(r,s)):t.Piece(s)?.color==="black"&&r.x+1<=7&&r.y+1<=7&&n.push(new y(r,s)),s=new C(r.x-1,r.y+1),t.Piece(s)===" "&&r.x-1>=0&&r.y+1<=7?n.push(new y(r,s)):t.Piece(s)?.color==="black"&&r.x-1>=0&&r.y+1<=7&&n.push(new y(r,s)),s=new C(r.x+1,r.y-1),t.Piece(s)===" "&&r.x+1<=7&&r.y-1>=0?n.push(new y(r,s)):t.Piece(s)?.color==="black"&&r.x+1<=7&&r.y-1>=0&&n.push(new y(r,s)),s=new C(r.x-1,r.y-1),t.Piece(s)===" "&&r.x-1>=0&&r.y-1>=0?n.push(new y(r,s)):t.Piece(s)?.color==="black"&&r.x-1>=0&&r.y-1>=0&&n.push(new y(r,s)),s=new C(r.x+2,r.y),t.Piece(s)===" "&&r.x+2===6&&r.y===7&&this.inCheck===!1&&t.Piece(new C(r.x+1,r.y))===" "&&t.castlingRights.includes("K")&&n.push(new y(r,s)),s=new C(r.x-2,r.y),t.Piece(s)===" "&&r.x-2===2&&r.y===7&&this.inCheck===!1&&t.Piece(new C(r.x-1,r.y))===" "&&t.Piece(s)===" "&&t.castlingRights.includes("Q")&&n.push(new y(r,s))}return n}testFindKingMoves(){let i=new oe([]),t=new be("a2","white",si);i.addPiece(t);let n=i.findKingMoves(t,i);if(n.length!==5){console.error("testFindKingMoves failed 0",n);return}if(i=new oe([]),t=new be("a2","black",si),i.addPiece(t),i.currentTurnColor="black",n=i.findKingMoves(t,i),n.length!==5){console.error("testFindKingMoves failed 1");return}if(i=new oe([]),t=new be("a2","white",si),i.addPiece(t),i.currentTurnColor="black",t=new be("b3","black",si),i.addPiece(t),n=i.findKingMoves(t,i),n.length!==8){console.error("testFindKingMoves failed 2");return}if(i=new oe([]),t=new be("a2","black",si),i.addPiece(t),t=new be("b3","white",si),i.addPiece(t),n=i.findKingMoves(t,i),n.length!==8){console.error("testFindKingMoves failed 3");return}}runAllTests(){this.testConvertToPosition(),this.testConstructors(),this.testBoardToFen(),this.testFenToBoard(),this.testFindPawnMoves(),this.testFindRookMoves(),this.testFindKnightMoves(),this.testFindBishopMoves(),this.testFindQueenMoves(),this.testFindKingMoves(),this.testFindPseudoLegalMoves(),this.testIsInCheck(),this.testFindLegalMoves(),console.log("All tests ran for board class")}}function gi(c,i){return c&&i&&typeof c=="object"&&typeof i=="object"?Object.keys(c).length===Object.keys(i).length&&Object.keys(c).reduce(function(t,n){return t&&gi(c[n],i[n])},!0):c===i}function xo(c){return new Promise(i=>setTimeout(i,c))}const Fa="/assets/capture.7158a77f.mp3";var qa=_e("<div class=canvas-container><canvas id=canvas>");function Ha({}){return De(()=>{const c=document.getElementById("canvas"),i=c.getContext("2d");c.width=window.innerWidth,c.height=window.innerHeight;const t=300,n=2;let r=[13,9,23],s=[.5,8];class d{constructor(b,M,$,T,V){this.x=b,this.y=M,this.speed_x=$,this.speed_y=T,this.radius=V,this.color="rgb(255, 255, 255, .3)"}update(){this.x+=this.speed_x,this.y+=this.speed_y,(this.x+this.radius>c.width||this.x-this.radius<0)&&(this.speed_x*=-1),(this.y+this.radius>c.height||this.y-this.radius<0)&&(this.speed_y*=-1),this.x=Math.min(Math.max(this.x,this.radius),c.width-this.radius),this.speed_x=this.speed_x===0?.1:this.speed_x,this.speed_y=this.speed_y===0?.1:this.speed_y,this.handleCollisions()}handleCollisions(){for(const b of a)if(b!==this){const M=b.x-this.x,$=b.y-this.y,T=Math.sqrt(M**2+$**2);if(T<2*this.radius){const V=2*this.radius-T,R=Math.atan2($,M);this.x-=.5*V*Math.cos(R),this.y-=.5*V*Math.sin(R);const S=Math.atan2($,M),F=Math.atan2(this.speed_y,this.speed_x),q=Math.sqrt(this.speed_x**2+this.speed_y**2),k=Math.sqrt(b.speed_x**2+b.speed_y**2),J=(q*Math.cos(F-S)*(this.radius-b.radius)+2*b.radius*k*Math.cos(S))/(this.radius+b.radius),re=(q*Math.sin(F-S)*(this.radius-b.radius)+2*b.radius*k*Math.sin(S))/(this.radius+b.radius),Y=(k*Math.cos(S-F)*(b.radius-this.radius)+2*this.radius*q*Math.cos(S))/(this.radius+b.radius),ae=(k*Math.sin(S-F)*(b.radius-this.radius)+2*this.radius*q*Math.sin(S))/(this.radius+b.radius);this.speed_x=J,this.speed_y=re,b.speed_x=Y,b.speed_y=ae}}}draw(b){b.beginPath(),b.arc(this.x,this.y,this.radius,0,Math.PI*2),b.fillStyle=this.color,b.fill(),b.closePath()}}const a=[];for(let x=0;x<t;x++){const b=m(n,c.width-n),M=m(n,c.height-n),$=v(...s)*I(),T=v(...s)*I(),V=new d(b,M,$,T,n);a.push(V)}function u(){requestAnimationFrame(u),i.fillStyle=`rgb(${r[0]}, ${r[1]}, ${r[2]})`,i.fillRect(0,0,c.width,c.height);for(const x of a)x.update(),x.draw(i)}u();function m(x,b){return Math.floor(Math.random()*(b-x+1))+x}function v(x,b){return Math.random()*(b-x)+x}function I(){return Math.random()<.5?-1:1}window.addEventListener("resize",()=>{console.log("resize");let x=window.innerWidth,b=window.innerHeight;c.width=x,c.height=b;for(const M of a)M.x=U(M.x,x,M.radius),M.y=U(M.y,b,M.radius)});function U(x,b,M){return Math.min(Math.max(x,M),b-M)}}),qa()}class ja{url="wss://gabrielmalek.com/v1/api/chessSub";ws;setWS;pingsSinceResponse=0;board;setBoard;setUser;user;pings=0;crownedIndex=-1;constructor(i,t,n,r,s,d){this.board=i,this.setBoard=t,this.setUser=r,this.user=n;let[a,u]=j(this.createWS(this.url));this.ws=a,this.setWS=u,this.createListeners(),this.moves=s,this.setMoves=d}sendChessUpdate(i,t,n,r){let s=new Sa(i.fen,t,n,i.currentTurnColor,r);this.ws().send(JSON.stringify(s))}unloadWebSockets(){window.onbeforeunload=()=>{this.ws().close()}}createWS(i){return new WebSocket(i)}pingWebSocket(i){if(this.ws().readyState!=3&&this.ws().readyState===1){if(this.pings<-10&&(this.pings=0),this.pings>5){this.ws().close(),this.pings=0;return}this.pings++,this.ws().send(JSON.stringify(i))}}beginPinging(i){setInterval(()=>{this.pingWebSocket(i())},3e3)}reconnectWebSocket(){this.setWS(this.createWS(this.url)),this.createListeners()}createListeners(){this.ws().addEventListener("open",()=>{console.log("ws open")}),this.ws().addEventListener("close",()=>{console.log("ws closed"),this.reconnectWebSocket()}),this.ws().addEventListener("message",async i=>{this.pings--;let t=JSON.parse(i.data);if(t.users){this.pingsSinceResponse--;let n=new CustomEvent("usersUpdated");n.data=t.users,document.dispatchEvent(n)}if(t.type==="promptForGame"||t.type=="createGame"){let n=new CustomEvent("notification");n.data=t,document.dispatchEvent(n)}if(t.type==="chessGameUpdate"&&(await this.sleep(100),t.fen!=this.board().fen)){const n=this.getNewMoves(t.moves);console.log(n);for(let r=0;r<n.length;r++)n[r].crowning?this.board().moveLegally(n[r].from,n[r].to,n[r].crownedTo):this.board().moveLegally(n[r].from,n[r].to)}}),this.ws().addEventListener("move",i=>{console.log("move",i)})}getNewMoves(i){let t=[];for(let n=0;n<i.length;n++){let r=!1;for(let s=0;s<this.board().History.length;s++)if(i[n].from===this.board().History[s].from&&i[n].to===this.board().History[s].to){r=!0,i[n].crowning&&!this.board().History[s].crowning&&(t[s].crowning=!0,t[s].crownedTo=i[n].crownedTo);break}r||t.push(i[n])}return t}async sleep(i){return new Promise(t=>setTimeout(t,i))}sendNotification(i){this.ws().send(JSON.stringify(i))}pawnsAtEndOfBoard(){let i=[],t=[];for(let n=0;n<8;n++)this.board().board[n]==="P"&&(i.push(this.board().board[n]),this.crownedIndex=n);for(let n=56;n<64;n++)this.board().board[n]==="p"&&(t.push(this.board().board[n]),this.crownedIndex=n);return i.length>0||t.length>0}close(){this.ws().close()}generateUserid(){let i="";for(let t=0;t<20;t++)i+=Math.floor(Math.random()*10);return i}}class Ao{ws;initialized=!1;virtualCursor;self;opponent;board;constructor(i,t,n,r){this.ws=i,this.virtualCursor=this.createVirtualCursor(),this.self=t,this.opponent=n,this.board=r}init(){this.initialized=!0,this.catchWedSocketEvents(),this.sendMouseEvents()}catchWedSocketEvents(){this.ws().addEventListener("message",i=>{if(JSON.parse(i.data).type!="virtualMouseEvent")return;let n=JSON.parse(i.data);this.triggerVirtualMouseEvent(n)}),this.ws().addEventListener("close",async()=>{await this.sleep(1e3),this.catchWedSocketEvents()})}triggerVirtualMouseEvent(i){let t,n,r,s;switch(i.eventType){case"pointermove":n=this.setVirtualPosition(i),t=new Event("virtualpointermove"),t.clientX=n.x,t.clientY=n.y,document.dispatchEvent(t);break;case"pointerdown":if(n=this.setVirtualPosition(i),r=document.elementsFromPoint(n.x,n.y),s=r[1],s.classList.contains("canDrag"))return;t=new Event("virtualpointerdown"),t.clientX=n.x,t.clientY=n.y,s.dispatchEvent(t),document.dispatchEvent(t),this.virtualCursor.style.backgroundColor="rgba(255, 0, 0, 0.541)";break;case"pointerup":t=new Event("virtualpointerup"),document.dispatchEvent(t),this.virtualCursor.style.backgroundColor="rgba(255, 0, 0, 0)";break}}sendMouseEvents(){let i=document.querySelector(".chessBoard");document.addEventListener("pointermove",t=>{if(!this.board().inLastMove||!this.initialized)return;let n=i?.offsetWidth,r=new Ui(t.clientX,t.clientY),s=new Bn(this.self,this.opponent,r,n,"pointermove");this.ws().send(JSON.stringify(s))}),document.addEventListener("pointerdown",t=>{if(!this.board().inLastMove)return;let n=i?.offsetWidth,r=new Ui(t.clientX,t.clientY),s=new Bn(this.self,this.opponent,r,n,"pointerdown");this.ws().send(JSON.stringify(s))}),document.addEventListener("pointerup",t=>{if(!this.board().inLastMove)return;let n=i?.offsetWidth,r=new Ui(t.clientX,t.clientY),s=new Bn(this.self,this.opponent,r,n,"pointerup");this.ws().send(JSON.stringify(s))})}setVirtualPosition(i){let t=document.querySelector(".oponentsCursor"),n=window.innerWidth,r=window.innerHeight,s=i.position.x,d=i.position.y,a=i.screen.x/2,u=i.screen.y/2,m=s-a,v=d-u,I=n/2,U=r/2,x=document.querySelector(".chessBoard").offsetWidth,b=x,M=x/i.chessBoardWidth,$=b/i.chessBoardWidth,T=m*M,V=v*$;I=window.innerWidth/2,U=window.innerHeight/2;let R=I-T,S=U-V;return t.style.transform=`translate(${R-this.cursorWidth/2}px, ${S-this.cursorWidth/2}px)`,{x:R,y:S}}createVirtualCursor(){let i=document.createElement("div");return i.classList.add("oponentsCursor"),document.body.appendChild(i),this.cursorWidth=i.offsetHeight,i}async sleep(i){return new Promise(t=>setTimeout(t,i))}}var Wa=_e("<div id=notificationButton data-bs-toggle=modal data-bs-target=#notificationModal>"),Qa=_e(`<div class="modal fade "id=notificationModal tabindex=-1 aria-labelledby=exampleModalLabel aria-hidden=true><div class="modal-dialog absolute top-[39vh] left-1/ "><div class="modal-content w-[50px] "><div class=modal-header><h1 class="modal-title fs-5"id=exampleModalLabel>Play Chess with "<!>"</h1><button type=button class=btn-close data-bs-dismiss=modal aria-label=Close></button></div><div class=modal-body>You've recieved a notification from "<!>" to play chess. Do you accept?</div><div class=modal-footer><button type=button class="btn btn-secondary"data-bs-dismiss=modal>Close</button><button type=button class="btn btn-primary">Play Chess`);function Ka({}){const c=new Audio(Rn),i=new Audio(Fa),[t,n]=j(new oe),[r,s]=j(!1),[d,a]=j(""),[u,m]=j([]),[v,I]=j([]),[U,x]=j();j(!1);const[b,M]=j([]),[$,T]=j(),[V,R]=j(),[S,F]=j([]),[q,k]=j(!1),[J,re]=j(),[Y,ae]=j(null),ve=new ja(t,n,$,T,b,M);ko(()=>{ve.ws()&&ve.close()}),De(async()=>{window.users=S,ht(),vt(),fe(),document.addEventListener("mousedown",O=>Ct(O)),document.ws=ve.ws(),window.animate_pieces=fe}),Hi(()=>{fe()}),Hi(()=>{t().checkmate()});function fe(){let O=document.querySelectorAll(".chessSquare");O.forEach(H=>{H.classList.add("animated_rotate")});let te=document.querySelectorAll("section.piece");te.forEach(H=>{H.style.transform="scale(0.01)"}),setTimeout(()=>{for(let H=0;H<te.length;H++)setTimeout(()=>{te[H].style.transform="scale(1)",te[H].style.transition="transform 1s"},H*20);for(let H=0;H<te.length;H++)setTimeout(()=>{te[H].style.transition="",te[H].style.transform="translate(0px, 0.1px)"},1500);for(let H=0;H<O.length;H++)setTimeout(()=>{O[H].classList.remove("animated_rotate")},1500)},900)}function vt(){document.addEventListener("usersUpdated",O=>{let te=O.data.filter(Ie=>$().id!=Ie.id),H=new Set(S().map(Ie=>Ie.id)),ke=new Set(te.map(Ie=>Ie.id)),pe=new Set([...ke].filter(Ie=>!H.has(Ie)));pe.size>0&&F([...te]),console.log("difference",pe)}),document.addEventListener("notification",O=>{Xe(O.data)}),document.addEventListener("updateUser",O=>{let te=document.querySelector("#mainUser");te.querySelector(".catLogo").style.backgroundImage="nothing"}),document.addEventListener("updateBoard",O=>{It(O.data)}),document.addEventListener("crowned",O=>{console.log("listened to crowned event"),console.log("event data",O.data),wt(O.data)}),document.addEventListener("forceBoardUpdate",O=>{updateBoard(),c.play()}),document.addEventListener("move",O=>{ve.sendChessUpdate(t(),$(),V(),t().History)})}function wt(O){console.log("crowned event received",O);let te=ve.crownedIndex;console.log("crowned index",te);let H=t().getPieceAtBoardIndex(te);console.log("crowned pawn",H);let ke=H.type;console.log("previous type",ke);let pe=O.board[te];console.log("new piece type",pe);let Ie=pe.toLowerCase();H.type=Ie,t().board[te]=pe;let N=document.getElementById(H.position.position)?.children[0];N?.classList.remove(ke),N?.classList.add(pe);let Se=b()[b().length-1];Se.crownedTo=pe,Se.crowning=!0;let it=b().splice(0,b().length-1);it.push(Se),M(it),updateBoard()}function Ct(O){O.detail>1&&O.preventDefault()}async function ht(){let O=sessionStorage.getItem("gabrielmalek/chess.data"),te=JSON.parse(O);if(O==null)console.log("session storage null");else{let H=new mi(te.id,te.username,te.CatUrl);T(H),k(!0),ve.beginPinging($);return}if(O=localStorage.getItem("gabrielmalek/chess.data"),te=JSON.parse(O),O==null)console.log("local storage null");else{let H=new mi(te.id,te.username,te.CatUrl);if(H.username==""||H.username==null)return;T(H),k(!1)}}async function It(O){if(O===void 0){console.log("DATA",O),await updateBoard(),ve.sendChessUpdate(t(),$(),V(),b());return}}function Xe(O){ae(O),O.type=="promptForGame"?(ae(O),document.querySelector("#notificationButton").click()):O.type=="createGame"&&(ae(O),a(O.fromUserColor),I(document.querySelectorAll("section.piece")),R(O.to),s(!0),new Ao(ve.ws,$(),O.to,t).init(),yt(),t().Pieces.forEach(H=>H.syncUIPosition()))}async function P(O){console.log("we must create a game");let te=new Va(O.from,O.to);try{ve.ws().send(JSON.stringify(te)),a(te.fromUserColor==="white"?"black":"white"),console.log("oppoent",O.from);let H=new mi(O.from.id,O.from.username,O.from.CatUrl);R(O.from),s(!0),I(document.querySelectorAll("section.piece")),new Ao(ve.ws,$(),O.from,t).init(),yt(),t().Pieces.forEach(pe=>pe.syncUIPosition())}catch(H){console.log("error: ",H)}}function yt(){let O=document.querySelector(".modal-backdrop ");O?.remove()}return[K(Ha,{}),K(Ee,{get when(){return Ze(()=>!q())()&&r()==!1},get children(){return K(Ba,{user:$,setUser:T,setInSession:k,chessWebSocket:ve})}}),K(Ee,{get when(){return Ze(()=>!!q())()&&r()==!1},get children(){return K(Ua,{users:S,user:$,setNotificationUser:re,onNotificationReceived:Xe,chessWebSocket:ve})}}),K(Ee,{get when(){return Ze(()=>d()=="white")()&&r()==!0},get children(){return K(Ca,{board:t,updateBoard:It,setLastMove:x,lastMove:U,movePieceSound:c,capturePieceSound:i,setMoves:M,moves:b,user:$,opponent:V,inGame:r,allPieces:u,setAllPieces:m})}}),K(Ee,{get when(){return r()==!1||d()=="black"&&r()==!0},get children(){return K(Ta,{board:t,updateBlackBoard:It,setLastMove:x,lastMove:U,movePieceSound:c,capturePieceSound:i,setMoves:M,moves:b,user:$,opponent:V,inGame:r,allPieces:u,setAllPieces:m})}}),K(Ee,{get when(){return r()==!1},get children(){return[Wa(),(()=>{var O=Qa(),te=O.firstChild,H=te.firstChild,ke=H.firstChild,pe=ke.firstChild,Ie=pe.firstChild,N=Ie.nextSibling;N.nextSibling;var Se=ke.nextSibling,it=Se.firstChild,kt=it.nextSibling;kt.nextSibling;var Ft=Se.nextSibling,nt=Ft.firstChild,Tt=nt.nextSibling;return O.style.setProperty("display","none"),ye(pe,()=>J()?.username,N),ye(Se,()=>J()?.username,kt),Tt.$$click=()=>{P(Y())},O})()]}})]}Ut(["click"]);const za=()=>K(Ka,{});ra(()=>K(za,{}),document.getElementById("root"));
